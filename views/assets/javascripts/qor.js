"use strict";function getSelect2Header(){var t=$("body").data().selectAjaxHeader,e=window.getSelect2HeaderFunction,i={};return t&&e&&$.isFunction(e)?(i[t]=e(),i):{}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}$.fn.qorSliderAfterShow=$.fn.qorSliderAfterShow||{},window.QOR={$formLoading:'<div id="qor-submit-loading" class="clearfix"><div class="mdl-spinner mdl-spinner--single-color mdl-js-spinner is-active"></div></div>'},String.prototype.escapeSymbol=function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return this.replace(/[&<>"']/g,function(t){return e[t]||t})},window.Mustache&&(window.Mustache.tags=["[[","]]"]),$(document).ajaxComplete(function(t,e,i){"POST"!=i.type&&"PUT"!=i.type||$.fn.qorSlideoutBeforeHide&&($.fn.qorSlideoutBeforeHide=null,window.onbeforeunload=null)}),$.fn.select2.ajaxCommonOptions=function(t){var i=t.remoteDataPrimaryKey;return{dataType:"json",headers:getSelect2Header(t),cache:!0,delay:250,data:function(t){return{keyword:t.term,page:t.page,per_page:20}},processResults:function(t,e){e.page=e.page||1;e=$.map(t,function(t){return t.id=t[i]||t.primaryKey||t.Id||t.ID,t});return{results:e,pagination:{more:20<=e.length}}}}},$.fn.select2.ajaxFormatResult=function(t,e,i){var n,o="";return t.loading?t.text:(console.log("select2.ajaxFormatResult: Data"),console.log(t),console.log("select2.ajaxFormatResult: has remote image"),console.log(i),i?(i=t.text||t.Name||t.Title||t.Code||t[Object.keys(t)[0]],o=(n=t.Image)?'<div class="select2-results__option-withimage"><img src="'+n+'"><span>'+i+"</span></div>":'<div class="select2-results__option-withimage">'+i+"</span></div>",$(o)):(o=0<e.length?window.Mustache.render(e.html().replace(/{{(.*?)}}/g,"[[$1]]"),t):t.text||t.Name||t.Title||t.Code||t[Object.keys(t)[0]],/<(.*)(\/>|<\/.+>)/.test(o)?$(o):o))},$(function(){function r(t,e){var i,n,o=e||new FormData;for(n in t)t.hasOwnProperty(n)&&t[n]&&(i=n),t[n]instanceof Date?o.append(i,t[n].toISOString()):"object"!==_typeof(t[n])||t[n]instanceof File?o.append(i,t[n]):r(t[n],o);return o}function t(){var t=$(".qor-linkify-object"),e=/https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.-]*/gi;t.length&&t.each(function(){var t=$(this).data("video-link");t.match(e)&&$(this).html('<iframe width="100%" height="100%" src="//www.youtube.com/embed/'.concat(t.replace(e,"$1"),'" frameborder="0" allowfullscreen></iframe>'))})}var s=window._,o=window.QOR,a=window.QOR_Translations,e='<div id="dialog" style="display: none;">\n                  <div class="mdl-dialog-bg"></div>\n                  <div class="mdl-dialog">\n                      <div class="mdl-dialog__content">\n                        <p><i class="material-icons">warning</i></p>\n                        <p class="mdl-dialog__message dialog-message">\n                        </p>\n                      </div>\n                      <div class="mdl-dialog__actions">\n                        <button type="button" class="mdl-button mdl-button--raised mdl-button--colored dialog-ok dialog-button" data-type="confirm">\n                          '.concat(a.okButton,'\n                        </button>\n                        <button type="button" class="mdl-button dialog-cancel dialog-button" data-type="">\n                          ').concat(a.cancelButton,"\n                        </button>\n                      </div>\n                    </div>\n                </div>"),l=$(e).appendTo("body");$(document).on("keyup.qor.confirm",function(t){l.is(":visible")&&(27===t.which&&setTimeout(function(){l.hide(),o.qorConfirmCallback=void 0},100),13===t.which&&setTimeout(function(){$('.dialog-button[data-type="confirm"]').click()},100))}).on("click.qor.confirm",".dialog-button",function(){var t=$(this).data("type"),e=o.qorConfirmCallback;return $.isFunction(e)&&e(t),l.hide(),o.qorConfirmCallback=void 0,!1}),o.qorConfirm=function(t,e){var i=l.find(".dialog-ok"),n=l.find(".dialog-cancel");return s.isString(t)?(l.find(".dialog-message").text(t),i.text(a.okButton),n.text(a.cancelButton)):s.isObject(t)&&(t.confirmOk&&t.confirmCancel?(i.text(t.confirmOk),n.text(t.confirmCancel)):(i.text(a.okButton),n.text(a.cancelButton)),t.icon&&l.find("i.material-icons").addClass(t.icon).html(t.icon),l.find(".dialog-message").text(t.confirm)),l.show(),o.qorConfirmCallback=e,!1},o.qorAjaxHandleFile=function(t,i,n,e){var o=new XMLHttpRequest;o.responseType="arraybuffer",o.open("POST",t,!0),o.onload=function(){var t,e;200===this.status?(t=new Blob([this.response],{type:i}),t=window.URL.createObjectURL(t),e=document.createElement("a"),document.body.appendChild(e),e.href=t,e.download=n||"download-"+$.now(),e.click()):window.alert(a.serverError)},s.isObject(e)&&("[object FormData]"!=Object.prototype.toString.call(e)&&(e=r(e)),o.send(e))};($.fn.qorSliderAfterShow.converVideoLinks=t)(),o.handleAjaxError=function(t){var e=$("body"),i=t.responseJSON,n=t.responseText,o=$('<ul class="qor-alert qor-error" data-dismissible="true"><button type="button" class="mdl-button mdl-button--icon" data-dismiss="alert">\n                            <i class="material-icons">close</i>\n                        </button></ul>');if(e.find(".qor-alert").remove(),422===t.status)if(i){var r=i.errors,s="";if($.isArray(r))for(var a=0;a<r.length;a++)s+='<li>\n                                          <i class="material-icons">error</i>\n                                          <span>'.concat(r[a],"</span>\n                                      </li>");else s='<li>\n                              <i class="material-icons">error</i>\n                              <span>'.concat(r,"</span>\n                          </li>");o.append(s)}else o=$(n).find(".qor-error");else o.append('<li>\n                            <i class="material-icons">error</i>\n                            <span>'.concat(t.statusText,"</span>\n                        </li>"));o.prependTo(e),setTimeout(function(){o.addClass("qor-alert__active")},50),setTimeout(function(){$('.qor-alert[data-dismissible="true"]').removeClass("qor-alert__active"),$("#qor-submit-loading").remove()},6e3)}}),function(t){"function"==typeof define&&define.amd?define("datepicker",["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(T){var t=T(window),o=window.document,h=T(o),r=window.Number,s="datepicker",i="click."+s,n="keyup."+s,a="focus."+s,e="resize."+s,l="show."+s,d="hide."+s,c="pick."+s,u=/(y|m|d)+/g,f=/\d+/g,p=/^\d{2,4}$/,m=s+"-top-left",y=s+"-bottom-left",g=[m,s+"-top-right",y,s+"-bottom-right"].join(" "),b=s+"-hide",v=Math.min,_=Object.prototype.toString;function q(t){return"string"==typeof t}function w(t){return"number"==typeof t&&!isNaN(t)}function S(t){return void 0===t}function $(t){return"date"===_.call(t).slice(8,-1).toLowerCase()}function k(t,e){var i=[];return Array.from?Array.from(t).slice(e||0):(w(e)&&i.push(e),i.slice.apply(t,i))}function x(t,e){var i=k(arguments,2);return function(){return t.apply(e,i.concat(k(arguments)))}}function C(t,e){return[31,(t=t)%4==0&&t%100!=0||t%400==0?29:28,31,30,31,30,31,31,30,31,30,31][e]}function D(t,e){(e=T.isPlainObject(e)?e:{}).language&&(e=T.extend({},D.LANGUAGES[e.language],e)),this.$element=T(t),this.options=T.extend({},D.DEFAULTS,e),this.isBuilt=!1,this.isShown=!1,this.isInput=!1,this.isInline=!1,this.initialValue="",this.initialDate=null,this.startDate=null,this.endDate=null,this.init()}D.prototype={constructor:D,init:function(){var t=this.options,e=this.$element,i=t.startDate,n=t.endDate,o=t.date;this.$trigger=T(t.trigger||e),this.isInput=e.is("input")||e.is("textarea"),this.isInline=t.inline&&(t.container||!this.isInput),this.format=function(t){var e,i,n=String(t).toLowerCase(),o=n.match(u);if(!o||0===o.length)throw new Error("Invalid date format.");for(t={source:n,parts:o},e=o.length,i=0;i<e;i++)switch(o[i]){case"dd":case"d":t.hasDay=!0;break;case"mm":case"m":t.hasMonth=!0;break;case"yyyy":case"yy":t.hasYear=!0}return t}(t.format),this.initialValue=this.getValue(),o=this.parseDate(o||this.initialValue),i&&(i=this.parseDate(i),o.getTime()<i.getTime()&&(o=new Date(i)),this.startDate=i),n&&(n=this.parseDate(n),i&&n.getTime()<i.getTime()&&(n=new Date(i)),o.getTime()>n.getTime()&&(o=new Date(n)),this.endDate=n),this.date=o,this.viewDate=new Date(o),this.initialDate=new Date(this.date),this.bind(),(t.autoshow||this.isInline)&&this.show(),t.autopick&&this.pick()},build:function(){var t,e=this.options,i=this.$element;this.isBuilt||(this.isBuilt=!0,this.$picker=t=T(e.template),this.$week=t.find('[data-view="week"]'),this.$yearsPicker=t.find('[data-view="years picker"]'),this.$yearsPrev=t.find('[data-view="years prev"]'),this.$yearsNext=t.find('[data-view="years next"]'),this.$yearsCurrent=t.find('[data-view="years current"]'),this.$years=t.find('[data-view="years"]'),this.$monthsPicker=t.find('[data-view="months picker"]'),this.$yearPrev=t.find('[data-view="year prev"]'),this.$yearNext=t.find('[data-view="year next"]'),this.$yearCurrent=t.find('[data-view="year current"]'),this.$months=t.find('[data-view="months"]'),this.$daysPicker=t.find('[data-view="days picker"]'),this.$monthPrev=t.find('[data-view="month prev"]'),this.$monthNext=t.find('[data-view="month next"]'),this.$monthCurrent=t.find('[data-view="month current"]'),this.$days=t.find('[data-view="days"]'),this.isInline?T(e.container||i).append(t.addClass("datepicker-inline")):(T(o.body).append(t.addClass("datepicker-dropdown")),t.addClass(b)),this.fillWeek())},unbuild:function(){this.isBuilt&&(this.isBuilt=!1,this.$picker.remove())},bind:function(){var t=this.options,e=this.$element;T.isFunction(t.show)&&e.on(l,t.show),T.isFunction(t.hide)&&e.on(d,t.hide),T.isFunction(t.pick)&&e.on(c,t.pick),this.isInput&&(e.on(n,T.proxy(this.keyup,this)),t.trigger||e.on(a,T.proxy(this.show,this))),this.$trigger.on(i,T.proxy(this.show,this))},unbind:function(){var t=this.options,e=this.$element;T.isFunction(t.show)&&e.off(l,t.show),T.isFunction(t.hide)&&e.off(d,t.hide),T.isFunction(t.pick)&&e.off(c,t.pick),this.isInput&&(e.off(n,this.keyup),t.trigger||e.off(a,this.show)),this.$trigger.off(i,this.show)},showView:function(t){var e=this.$yearsPicker,i=this.$monthsPicker,n=this.$daysPicker,o=this.format;if(o.hasYear||o.hasMonth||o.hasDay)switch(r(t)){case 2:case"years":i.addClass(b),n.addClass(b),o.hasYear?(this.fillYears(),e.removeClass(b)):this.showView(0);break;case 1:case"months":e.addClass(b),n.addClass(b),o.hasMonth?(this.fillMonths(),i.removeClass(b)):this.showView(2);break;default:e.addClass(b),i.addClass(b),o.hasDay?(this.fillDays(),n.removeClass(b)):this.showView(1)}},hideView:function(){this.options.autohide&&this.hide()},place:function(){var t=this.options,e=this.$element,i=this.$picker,n=h.outerWidth(),o=h.outerHeight(),r=e.outerWidth(),s=e.outerHeight(),a=i.width(),l=i.height(),e=e.offset(),d=e.left,e=e.top,c=parseFloat(t.offset)||10,u=m;l<e&&o<e+s+l?(e-=l+c,u=y):e+=s+c,n<d+a&&(d=d+r-a,u=u.replace("left","right")),i.removeClass(g).addClass(u).css({top:e,left:d,zIndex:parseInt(t.zIndex,10)})},trigger:function(t,e){t=T.Event(t,e);return this.$element.trigger(t),t},createItem:function(t){var e=this.options,i=e.itemTag,n={text:"",view:"",muted:!1,picked:!1,disabled:!1};return T.extend(n,t),"<"+i+" "+(n.disabled?'class="'+e.disabledClass+'"':n.picked?'class="'+e.pickedClass+'"':n.muted?'class="'+e.mutedClass+'"':"")+(n.view?' data-view="'+n.view+'"':"")+">"+n.text+"</"+i+">"},fillAll:function(){this.fillYears(),this.fillMonths(),this.fillDays()},fillWeek:function(){for(var t=this.options,e=parseInt(t.weekStart,10)%7,i=t.daysMin,n="",i=T.merge(i.slice(e),i.slice(0,e)),o=0;o<=6;o++)n+=this.createItem({text:i[o]});this.$week.html(n)},fillYears:function(){for(var t,e,i=this.options,n=i.disabledClass||"",o=i.yearSuffix||"",r=T.isFunction(i.filter)&&i.filter,s=this.startDate,a=this.endDate,i=this.viewDate,l=i.getFullYear(),d=i.getMonth(),c=i.getDate(),u=this.date,h=u.getFullYear(),f=!1,p=!1,m=!1,y="",g=-5;g<=6;g++)u=new Date(l+g,d,c),e=-5===g||6===g,t=l+g===h,m=!1,s&&(m=u.getFullYear()<s.getFullYear(),-5===g&&(f=m)),!m&&a&&(m=u.getFullYear()>a.getFullYear(),6===g&&(p=m)),!m&&r&&(m=!1===r.call(this.$element,u)),y+=this.createItem({text:l+g,view:m?"year disabled":t?"year picked":"year",muted:e,picked:t,disabled:m});this.$yearsPrev.toggleClass(n,f),this.$yearsNext.toggleClass(n,p),this.$yearsCurrent.toggleClass(n,!0).html(l+-5+o+" - "+(l+6)+o),this.$years.html(y)},fillMonths:function(){for(var t,e=this.options,i=e.disabledClass||"",n=e.monthsShort,o=T.isFunction(e.filter)&&e.filter,r=this.startDate,s=this.endDate,a=this.viewDate,l=a.getFullYear(),d=a.getDate(),c=this.date,u=c.getFullYear(),h=c.getMonth(),f=!1,p=!1,m=!1,y="",g=0;g<=11;g++)c=new Date(l,g,d),t=l===u&&g===h,m=!1,!(m=!(m=r?(f=c.getFullYear()===r.getFullYear())&&c.getMonth()<r.getMonth():m)&&s?(p=c.getFullYear()===s.getFullYear())&&c.getMonth()>s.getMonth():m)&&o&&(m=!1===o.call(this.$element,c)),y+=this.createItem({index:g,text:n[g],view:m?"month disabled":t?"month picked":"month",picked:t,disabled:m});this.$yearPrev.toggleClass(i,f),this.$yearNext.toggleClass(i,p),this.$yearCurrent.toggleClass(i,f&&p).html(l+e.yearSuffix||""),this.$months.html(y)},fillDays:function(){var t,e,i,n,o=this.options,r=o.disabledClass||"",s=o.yearSuffix||"",a=o.monthsShort,l=parseInt(o.weekStart,10)%7,d=T.isFunction(o.filter)&&o.filter,c=this.startDate,u=this.endDate,h=this.viewDate,f=h.getFullYear(),p=h.getMonth(),m=f,y=p,g=f,b=p,v=this.date,_=v.getFullYear(),q=v.getMonth(),w=v.getDate(),h=!1,S=!1,$=!1,k=[],x=[],D=[];for(0===p?(--m,y=11):--y,e=C(m,y),(n=(v=new Date(f,p,1)).getDay()-l)<=0&&(n+=7),c&&(h=v.getTime()<=c.getTime()),i=e-(n-1);i<=e;i++)v=new Date(m,y,i),$=!1,!($=c?v.getTime()<c.getTime():$)&&d&&($=!1===d.call(this.$element,v)),k.push(this.createItem({text:i,view:"day prev",muted:!0,disabled:$}));for(11===p?(g+=1,b=0):b+=1,e=C(f,p),n=42-(k.length+e),v=new Date(f,p,e),u&&(S=v.getTime()>=u.getTime()),i=1;i<=n;i++)v=new Date(g,b,i),$=!1,!($=u?v.getTime()>u.getTime():$)&&d&&($=!1===d.call(this.$element,v)),x.push(this.createItem({text:i,view:"day next",muted:!0,disabled:$}));for(i=1;i<=e;i++)v=new Date(f,p,i),t=f===_&&p===q&&i===w,$=!1,!($=!($=c?v.getTime()<c.getTime():$)&&u?v.getTime()>u.getTime():$)&&d&&($=!1===d.call(this.$element,v)),D.push(this.createItem({text:i,view:$?"day disabled":t?"day picked":"day",picked:t,disabled:$}));this.$monthPrev.toggleClass(r,h),this.$monthNext.toggleClass(r,S),this.$monthCurrent.toggleClass(r,h&&S).html(o.yearFirst?f+s+" "+a[p]:a[p]+" "+f+s),this.$days.html(k.join("")+D.join(" ")+x.join(""))},click:function(t){var e,i,n,o,r,s,a=T(t.target),l=this.viewDate;if(t.stopPropagation(),t.preventDefault(),!a.hasClass("disabled"))switch(e=l.getFullYear(),i=l.getMonth(),n=l.getDate(),s=a.data("view")){case"years prev":case"years next":e="years prev"===s?e-10:e+10,r=a.text(),(o=p.test(r))&&(e=parseInt(r,10),this.date=new Date(e,i,v(n,28))),this.viewDate=new Date(e,i,v(n,28)),this.fillYears(),o&&(this.showView(1),this.pick("year"));break;case"year prev":case"year next":e="year prev"===s?e-1:e+1,this.viewDate=new Date(e,i,v(n,28)),this.fillMonths();break;case"year current":this.format.hasYear&&this.showView(2);break;case"year picked":this.format.hasMonth?this.showView(1):this.hideView();break;case"year":e=parseInt(a.text(),10),this.date=new Date(e,i,v(n,28)),this.viewDate=new Date(e,i,v(n,28)),this.format.hasMonth?this.showView(1):this.hideView(),this.pick("year");break;case"month prev":case"month next":i="month prev"===s?i-1:"month next"===s?i+1:i,this.viewDate=new Date(e,i,v(n,28)),this.fillDays();break;case"month current":this.format.hasMonth&&this.showView(1);break;case"month picked":this.format.hasDay?this.showView(0):this.hideView();break;case"month":i=T.inArray(a.text(),this.options.monthsShort),this.date=new Date(e,i,v(n,28)),this.viewDate=new Date(e,i,v(n,28)),this.format.hasDay?this.showView(0):this.hideView(),this.pick("month");break;case"day prev":case"day next":case"day":i="day prev"===s?i-1:"day next"===s?i+1:i,n=parseInt(a.text(),10),this.date=new Date(e,i,n),this.viewDate=new Date(e,i,n),this.fillDays(),"day"===s&&this.hideView(),this.pick("day");break;case"day picked":this.hideView(),this.pick("day")}},clickDoc:function(t){for(var e,i=t.target,n=this.$trigger[0];i!==o;){if(i===n){e=!0;break}i=i.parentNode}e||this.hide()},keyup:function(){this.update()},getValue:function(){var t=this.$element,e="";return this.isInput?e=t.val():this.isInline&&!this.options.container||(e=t.text()),e},setValue:function(t){var e=this.$element;t=q(t)?t:"",this.isInput?e.val(t):this.isInline&&!this.options.container||e.text(t)},show:function(){this.isBuilt||this.build(),this.isShown||this.trigger(l).isDefaultPrevented()||(this.isShown=!0,this.$picker.removeClass(b).on(i,T.proxy(this.click,this)),this.showView(this.options.startView),this.isInline||(t.on(e,this._place=x(this.place,this)),h.on(i,this._clickDoc=x(this.clickDoc,this)),this.place()))},hide:function(){!this.isShown||this.trigger(d).isDefaultPrevented()||(this.isShown=!1,this.$picker.addClass(b).off(i,this.click),this.isInline||(t.off(e,this._place),h.off(i,this._clickDoc)))},update:function(){this.setDate(this.getValue(),!0)},pick:function(t){var e=this.$element,i=this.date;this.trigger(c,{view:t||"",date:i}).isDefaultPrevented()||(this.setValue(this.formatDate(this.date)),this.isInput&&e.trigger("change"))},reset:function(){this.setDate(this.initialDate,!0),this.setValue(this.initialValue),this.isShown&&this.showView(this.options.startView)},getMonthName:function(t,e){var i=this.options,n=i.months;return T.isNumeric(t)?t=r(t):S(e)&&(e=t),(n=!0===e?i.monthsShort:n)[w(t)?t:this.date.getMonth()]},getDayName:function(t,e,i){var n=this.options,o=n.days;return T.isNumeric(t)?t=r(t):(S(i)&&(i=e),S(e)&&(e=t)),(o=!0===i?n.daysMin:!0===e?n.daysShort:o)[w(t)?t:this.date.getDay()]},getDate:function(t){var e=this.date;return t?this.formatDate(e):new Date(e)},setDate:function(t,e){var i=this.options.filter;($(t)||q(t))&&(t=this.parseDate(t),T.isFunction(i)&&!1===i.call(this.$element,t)||(this.date=t,this.viewDate=new Date(t),e||this.pick(),this.isBuilt&&this.fillAll()))},setStartDate:function(t){($(t)||q(t))&&(this.startDate=this.parseDate(t),this.isBuilt&&this.fillAll())},setEndDate:function(t){($(t)||q(t))&&(this.endDate=this.parseDate(t),this.isBuilt&&this.fillAll())},parseDate:function(t){var e,i,n,o,r,s,a=this.format,l=[];if($(t))return new Date(t.getFullYear(),t.getMonth(),t.getDate());if(q(t)&&(l=t.match(f)||[]),i=(t=new Date).getFullYear(),n=t.getDate(),o=t.getMonth(),e=a.parts.length,l.length===e)for(s=0;s<e;s++)switch(r=parseInt(l[s],10)||1,a.parts[s]){case"dd":case"d":n=r;break;case"mm":case"m":o=r-1;break;case"yy":i=2e3+r;break;case"yyyy":i=r}return new Date(i,o,n)},formatDate:function(t){var e,i,n,o,r,s=this.format,a="";if($(t))for(a=s.source,i=t.getFullYear(),(o={d:t.getDate(),m:t.getMonth()+1,yy:i.toString().substring(2),yyyy:i}).dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m,e=s.parts.length,r=0;r<e;r++)n=s.parts[r],a=a.replace(n,o[n]);return a},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(s)}},D.LANGUAGES={},D.DEFAULTS={autoshow:!1,autohide:!1,autopick:!1,inline:!1,container:null,trigger:null,language:"",format:"yyyy-mm-dd",date:null,startDate:null,endDate:null,startView:0,weekStart:0,yearFirst:!1,yearSuffix:"",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],itemTag:"li",mutedClass:"muted",pickedClass:"picked",disabledClass:"disabled",template:'<div class="datepicker-container"><div class="datepicker-panel" data-view="years picker"><ul><li data-view="years prev">&lsaquo;</li><li data-view="years current"></li><li data-view="years next">&rsaquo;</li></ul><ul data-view="years"></ul></div><div class="datepicker-panel" data-view="months picker"><ul><li data-view="year prev">&lsaquo;</li><li data-view="year current"></li><li data-view="year next">&rsaquo;</li></ul><ul data-view="months"></ul></div><div class="datepicker-panel" data-view="days picker"><ul><li data-view="month prev">&lsaquo;</li><li data-view="month current"></li><li data-view="month next">&rsaquo;</li></ul><ul data-view="week"></ul><ul data-view="days"></ul></div></div>',offset:10,zIndex:1e3,filter:null,show:null,hide:null,pick:null},D.setDefaults=function(t){T.extend(D.DEFAULTS,T.isPlainObject(t)&&t)},D.other=T.fn.qorDatepicker,T.fn.qorDatepicker=function(n){var o,r=k(arguments,1);return this.each(function(){var t,e=T(this),i=e.data(s);if(!i){if(/destroy/.test(n))return;t=T.extend({},e.data(),T.isPlainObject(n)&&n),e.data(s,i=new D(this,t))}q(n)&&T.isFunction(e=i[n])&&(o=e.apply(i,r))}),S(o)?this:o},T.fn.qorDatepicker.Constructor=D,T.fn.qorDatepicker.languages=D.LANGUAGES,T.fn.qorDatepicker.setDefaults=D.setDefaults,T.fn.qorDatepicker.noConflict=function(){return T.fn.qorDatepicker=D.other,this}}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(h){var i=window.Mustache,f=window.QOR,n="qor.action",t="enable."+n,o="click."+n,r='[data-ajax-form="true"][data-method]',e=".qor-action-bulk-buttons",s=".qor-page .qor-table-container",a=".qor-table--bulking",l=".qor-table--bulking tbody tr",p="is_undo",d="mdl-data-table--selectable",c="primary_values[]",m=".qor-body__loading";function u(t,e){this.$element=h(t),this.options=h.extend({},u.DEFAULTS,h.isPlainObject(e)&&e),this.ajaxForm={},this.init()}return u.prototype={constructor:u,init:function(){this.bind(),this.initActions()},bind:function(){this.$element.on(o,".qor-action--bulk",this.renderBulkTable.bind(this)).on(o,".qor-action--exit-bulk",this.removeBulkTable.bind(this)),h(document).on(o,l,this.handleBulkTableClick.bind(this)).on(o,r,this.clickAjaxButton.bind(this))},unbind:function(){this.$element.off(o),h(document).off(o,l,this.handleBulkTableClick).off(o,r,this.clickAjaxButton)},initActions:function(){h(s).find("table").length||(h(e).hide(),h(".qor-page__header a.qor-action--button").hide())},collectFormData:function(){var e,t=h(a).find(".mdl-checkbox__input:checked"),i=[],n=[];return t.length&&t.each(function(){var t=h(this).closest("tr").data("primary-key");e={},t&&(i.push({name:c,value:t.toString()}),e[c]=t.toString(),n.push(e))}),this.ajaxForm.formData=i,this.ajaxForm.normalFormData=n,this.ajaxForm},actionSubmit:function(t){return this.submit(t),!1},handleBulkTableClick:function(t){var t=h(t.target).closest("tr"),e=t.find("td").first(),i=e.find(".mdl-js-checkbox");return i.toggleClass("is-checked"),t.toggleClass("is-selected"),e.find("input").prop("checked",i.hasClass("is-checked")),!1},adjustPageBodyStyle:function(t){var e=h(".qor-page > .qor-page__header"),i=h(".qor-page > .qor-page__body"),n=e.find(".qor-page-subnav__header").length?96:48;t?e.height()>n&&i.css("padding-top",e.height()):parseInt(i.css("padding-top"))>n&&i.css("padding-top","")},renderBulkTable:function(){var t=h("body");t.hasClass("qor-slideout-open")&&t.data("qor.slideout").hide(),h(".qor-table__inner-list").remove(),this.toggleBulkButtons(),this.enableTableMDL(),this.adjustPageBodyStyle(!0)},removeBulkTable:function(){this.toggleBulkButtons(),this.disableTableMDL(),this.adjustPageBodyStyle()},enableTableMDL:function(){h(s).find("table").removeAttr("data-upgraded").addClass(d).trigger("enable")},disableTableMDL:function(){h(s).find("table").removeClass(d).find("tr").removeClass("is-selected").find("td:first,th:first").remove()},toggleBulkButtons:function(){this.$element.find(".qor-action-forms").toggle(),h(e).find("button").toggleClass("hidden"),h(s).toggleClass("qor-table--bulking").find(".qor-table__actions").toggle(),h(".qor-page__header .qor-actions, .qor-page__header .qor-search-container").toggle()},clickAjaxButton:function(t){t=h(t.target);return this.collectFormData(),this.ajaxForm.properties=t.data(),this.submit(t),!1},renderFlashMessage:function(t){var e=u.FLASHMESSAGETMPL;return i.parse(e),i.render(e,t)},addLoading:function(){h(m).remove(),h(u.TEMPLATE_LOADING).appendTo(h("body")).trigger("enable.qor.material")},submit:function(e){var i=this,n=this.ajaxForm||{},t=n.properties||e.data();if(e.hasClass("qor-action-disabled"))return!1;!t.fromIndex||n.formData&&n.formData.length?t.confirm?f.qorConfirm(t,function(t){t&&i.handleAjaxSubmit(n,e)}):this.handleAjaxSubmit(n,e):f.qorConfirm(n.properties.errorNoItem)},handleAjaxSubmit:function(o,r){var s=this,a=this.$element,l=r.closest(".qor-action-forms"),d=o.properties||r.data(),c=d.url,u=d.undoUrl,e=r.hasClass(p),t=r.closest(".qor-slideout").length,i=a.length&&!t;e&&(c=u),this.addLoading(),(l.length?l.find('[data-ajax-form="true"][data-method]'):r).addClass("qor-action-disabled"),h.ajax(c,{method:d.method,data:o.formData,dataType:d.datatype||"json",beforeSend:function(){u?r.prop("disabled",!0):i&&s.switchButtons(a,1)},success:function(t){if(u)return a.trigger("undo.qor.action",[r,e,t]),e?r.removeClass(p):r.addClass(p),void r.prop("disabled",!1);window.location.reload()},error:function(t){200!=t.status&&(u?r.prop("disabled",!1):i&&s.switchButtons(a),f.handleAjaxError(t))},complete:function(t){var e,i,n=t.getResponseHeader("content-type"),t=t.getResponseHeader("Content-Disposition");h(m).remove(),r.prop("disabled",!1),(l.length?l.find('[data-ajax-form="true"][data-method]'):r).removeClass("qor-action-disabled"),t&&-1!==t.indexOf("attachment")&&(e={},i="",null!=(t=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(t))&&t[1]&&(i=t[1].replace(/['"]/g,"")),d.method&&(e=h.extend({},o.normalFormData,{_method:d.method})),f.qorAjaxHandleFile(c,n,i,e),u?r.prop("disabled",!1):s.switchButtons(a))}})},switchButtons:function(t,e){e=!!e;t.find(".qor-action-button").prop("disabled",e)},destroy:function(){this.unbind(),this.$element.removeData(n)}},u.DEFAULTS={},u.TEMPLATE_LOADING='<div class="qor-body__loading">\n                                        <div class="mdl-dialog-bg"></div>\n                                        <div><div class="mdl-spinner mdl-js-spinner is-active qor-layout__bottomsheet-spinner"></div></div>\n                                    </div>',h.fn.qorSliderAfterShow.qorInsertActionData=function(t,e){var e=h(e).find('[data-toggle="qor-action-slideout"]'),i=e.find("form"),n=h(a).find(".mdl-checkbox__input:checked");e.length&&n.length&&n.each(function(){var t=h(this).closest("tr").data("primary-key");t&&i.prepend('<input class="js-primary-value" type="hidden" name="primary_values[]" value="'+t+'" />')})},u.plugin=function(i){return this.each(function(){var t=h(this),e=t.data(n);e||t.data(n,e=new u(this,i)),"string"==typeof i&&h.isFunction(t=e[i])&&t.call(e)})},h(function(){var e={},i='[data-toggle="qor.action.bulk"]';h(i).length||h(document).on(o,r,function(t){return(new u).actionSubmit(h(t.target)),!1}),h(document).on("disable.qor.action",function(t){u.plugin.call(h(i,t.target),"destroy")}).on(t,function(t){u.plugin.call(h(i,t.target),e)}).triggerHandler(t)}),u}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(a){var l=window.location,r=window.QOR,n="qor.advancedsearch",t="enable."+n,e="click."+n;function o(t,e){this.$element=a(t),this.options=a.extend({},o.DEFAULTS,a.isPlainObject(e)&&e),this.init()}return o.prototype={constructor:o,init:function(){this.$form=this.$element.find("form"),this.$modal=a(o.MODAL).appendTo("body"),this.bind()},bind:function(){this.$element.on("submit.qor.advancedsearch","form",this.submit.bind(this)).on(e,".qor-advanced-filter__save",this.showSaveFilter.bind(this)).on(e,".qor-advanced-filter__toggle",this.toggleFilterContent).on(e,".qor-advanced-filter__close",this.closeFilter).on(e,".qor-advanced-filter__delete",this.deleteSavedFilter),this.$modal.on("shown.qor.modal",this.start.bind(this))},closeFilter:function(){a(".qor-advanced-filter__dropdown").hide()},toggleFilterContent:function(t){a(t.target).closest(".qor-advanced-filter__toggle").parent().find(">[advanced-search-toggle]").toggle()},showSaveFilter:function(){this.$modal.qorModal("show")},deleteSavedFilter:function(t){var e=a(t.target).closest(".qor-advanced-filter__delete"),i=e.closest(".qor-advanced-filter__savedfilter"),n=e.data("filter-name"),o=l.pathname;return r.qorConfirm({confirm:"Are you sure you want to delete this saved filter?"},function(t){t&&a.get(o,a.param({delete_saved_filter:n})).done(function(){e.closest("li").remove(),0===i.find("li").length&&i.remove()}).fail(function(){r.qorConfirm("Server error, please try again!")})}),!1},start:function(){this.$modal.trigger("enable.qor.material").on(e,".qor-advanced-filter__savefilter",this.saveFilter.bind(this))},saveFilter:function(){var t=this.$modal.find("#qor-advanced-filter__savename").val();t&&this.$form.prepend('<input type="hidden" name="filter_saving_name" value="'.concat(t,'"  />')).submit()},submit:function(){var t,e=this.$form,i=e.find("input[name],select[name]"),n=[],o=e.closest(".qor-bottomsheets"),r=e.serialize();if(i.each(function(){n.push(a(this).attr("name"))}),t=function(t){var e,i,n=decodeURIComponent(l.search.substr(1)).split("&"),o={};if(1==n.length&&""==n[0])return!1;for(i in n)""!==n[i]&&(e=n[i].split("="),o[e[0]]=e[1]);return t.forEach(function(t){delete o[t]}),o}(n),!a.isEmptyObject(t))for(var s in t)t.hasOwnProperty(s)&&e.prepend('<input type="hidden" name='.concat(s," value=").concat(t[s],"  />"));if(this.$element.find(".qor-advanced-filter__dropdown").hide(),this.removeEmptyPairs(e),o.length){if(o.data().url)return i="".concat(o.data().url,"?").concat(r),o.trigger("reloadFromUrl.qor.bottomsheets",[i]),!1;console.log("dont have base URL! advancedsearch reload failed")}},removeEmptyPairs:function(t){t.find("advanced-filter-group").each(function(){var t=a(this);""==t.find("[filter-required]").val()&&t.remove()})},destroy:function(){this.$element.removeData(n)}},o.DEFAULTS={},o.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                    <h2 class="mdl-card__title-text">Save advanced filter</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                        \n                    <div class="mdl-textfield mdl-textfield--full-width mdl-js-textfield">\n                        <input class="mdl-textfield__input" type="text" id="qor-advanced-filter__savename">\n                        <label class="mdl-textfield__label" for="qor-advanced-filter__savename">Please enter name for this filter</label>\n                    </div>\n\n                </div>\n                <div class="mdl-card__actions">\n                    <a class="mdl-button mdl-button--colored mdl-button--raised qor-advanced-filter__savefilter">Save This Filter</a>\n                    <a class="mdl-button mdl-button--colored" data-dismiss="modal">Cancel</a>\n                </div>\n                <div class="mdl-card__menu">\n                    <button class="mdl-button mdl-button--icon" data-dismiss="modal" aria-label="close">\n                        <i class="material-icons">close</i>\n                    </button>\n                </div>\n            </div>\n        </div>',o.plugin=function(i){return this.each(function(){var t=a(this),e=t.data(n);if(!e){if(/destroy/.test(i))return;t.data(n,e=new o(this,i))}"string"==typeof i&&a.isFunction(t=e[i])&&t.apply(e)})},a(function(){var e='[data-toggle="qor.advancedsearch"]';a(document).on("disable.qor.advancedsearch",function(t){o.plugin.call(a(e,t.target),"destroy")}).on(t,function(t){o.plugin.call(a(e,t.target),void 0)}).triggerHandler(t)}),o}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(n){var o="qor.autoheight",t="enable."+o;function r(t,e){this.$element=n(t),this.options=n.extend({},r.DEFAULTS,n.isPlainObject(e)&&e),this.init()}return r.prototype={constructor:r,init:function(){var t=this.$element;this.paddingTop=parseInt(t.css("padding-top"),10),this.paddingBottom=parseInt(t.css("padding-bottom"),10),this.resize(),this.bind()},bind:function(){this.$element.on("input",n.proxy(this.resize,this))},unbind:function(){this.$element.off("input",this.resize)},resize:function(){var t=this.$element,e=t.prop("scrollHeight");e?t.height("auto").height(e-this.paddingTop-this.paddingBottom):t.height("40px")},destroy:function(){this.unbind(),this.$element.removeData(o)}},r.DEFAULTS={},r.plugin=function(i){return this.each(function(){var t=n(this),e=t.data(o);if(!e){if(/destroy/.test(i))return;t.data(o,e=new r(this,i))}"string"==typeof i&&n.isFunction(t=e[i])&&t.apply(e)})},n(function(){var e="textarea.qor-js-autoheight";n(document).on("disable.qor.autoheight",function(t){r.plugin.call(n(e,t.target),"destroy")}).on(t,function(t){r.plugin.call(n(e,t.target))}).triggerHandler(t)}),r}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(b){var o=window._,n=window.FormData,e=window.QOR_Translations,r="qor.bottomsheets",t="click."+r,i="submit."+r,v="qor-bottomsheets-open",_=".mdl-layout__content.qor-page",s=".qor-page__body",q=".qor-page__header",a=".qor-bottomsheets__search-input";function l(t,e){var i=[],n=e?"src":"href";return t.each(function(){i.push(b(this).attr(n))}),o.uniq(i)}function d(t,e,i){for(var n=0,o=0,r=t.length;o<r;o++){var s=document.createElement("script");s.onload=function(){++n===t.length&&b.isFunction(i)&&i(),e&&e.url&&e.response&&function(t,e){var i,n=b.fn.qorSliderAfterShow;for(i in n)n.hasOwnProperty(i)&&!n[i].isLoadedInBottomSheet&&"initPublishForm"!=i&&"qorActivityinit"!=i&&(n[i].isLoadedInBottomSheet=!0,n[i].call(this,t,e))}(e.url,e.response)},s.src=t[o],document.body.appendChild(s)}}function w(t,e){this.$element=b(t),this.options=b.extend({},w.DEFAULTS,b.isPlainObject(e)&&e),this.resourseData={},this.init()}return w.prototype={constructor:w,init:function(){this.build(),this.bind()},build:function(){var t;this.$bottomsheets=t=b(w.TEMPLATE).appendTo("body"),this.$body=t.find(".qor-bottomsheets__body"),this.$title=t.find(".qor-bottomsheets__title"),this.$header=t.find(".qor-bottomsheets__header"),this.$bodyClass=b("body").prop("class"),this.filterURL="",this.searchParams=""},bind:function(){this.$bottomsheets.on(i,"form",this.submit.bind(this)).on(t,'[data-dismiss="bottomsheets"]',this.hide.bind(this)).on(t,".qor-pagination-container a",this.pagination.bind(this)).on(t,".qor-bottomsheets__search-button",this.search.bind(this)).on("keyup.qor.bottomsheets",this.keyup.bind(this)).on("selectorChanged.qor.selector",this.selectorChanged.bind(this)).on("filterChanged.qor.filter",this.filterChanged.bind(this)).on("reloadFromUrl.qor.bottomsheets",this.reloadFromUrl.bind(this))},unbind:function(){this.$bottomsheets.off(i,"form").off(t).off("selectorChanged.qor.selector").off("filterChanged.qor.filter")},bindActionData:function(t){for(var e=this.$body.find('[data-toggle="qor-action-slideout"]').find("form"),i=t.length-1;0<=i;i--)e.prepend('<input type="hidden" name="primary_values[]" value="'+t[i]+'" />')},filterChanged:function(t,e,i){e=this.constructloadURL(e,i);return e&&this.reload(e),!1},selectorChanged:function(t,e,i){e=this.constructloadURL(e,i);return e&&this.reload(e),!1},keyup:function(t){var e=this.$bottomsheets.find(a);13===t.which&&e.length&&e.is(":focus")&&this.search()},search:function(){var t=this.$bottomsheets,e=t.data().url,t=b.trim(t.find(a).val()),i=e+"?keyword="+t;/\?/g.test(e)&&(i=e+"&keyword="+t),this.reload(i)},pagination:function(t){t=b(t.target).closest("a").prop("href");return t&&this.reload(t),!1},reload:function(t){var e=this.$bottomsheets.find(s);this.addLoading(e),this.fetchPage(t)},reloadFromUrl:function(t,e){this.reload(e)},fetchPage:function(i){var n=this.$bottomsheets,o=this;b.get(i,function(t){var t=b(t).find(_),e=t.find(q),t=t.find(s);t.length?(n.find(s).html(t.html()),e.length&&(o.$body.find(q).html(e.html()).trigger("enable"),o.addHeaderClass()),n.trigger("reload.qor.bottomsheets")):o.reload(i)}).fail(function(){window.alert("server error, please try again later!")})},constructloadURL:function(t,e){var i,n,o=this.filterURL,r=this.$bottomsheets.data().url;if(!o){if(!r)return;o=r}return r=new URL("http://www.getqor.com/"+t),t=e,r=r.search,t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),r=null===(t=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(decodeURIComponent(r)))?"":t[1].replace(/\+/g," "),o=this.filterURL=(t=e,e=r,r=o,i=String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),i=new RegExp("([?&])"+i+"=.*?(&|$)","i"),n=-1!==r.indexOf("?")?"&":"?",r.match(i)?e?r.replace(i,"$1"+t+"="+e+"$2"):"?"===RegExp.$1||RegExp.$1===RegExp.$2?r.replace(i,"$1"):r.replace(i,""):e?r+n+t+"="+e:void 0)},addHeaderClass:function(){this.$body.find(q).hide(),this.$bottomsheets.find(q).children(".qor-bottomsheet__filter").length&&this.$body.addClass("has-header").find(q).show()},addLoading:function(t){t.html(""),b(w.TEMPLATE_LOADING).appendTo(t).trigger("enable.qor.material")},loadExtraResource:function(t){i=t.$links,n=b("link"),i=l(i),n=l(n);var e,i=o.difference(i,n),n=(n=t.$scripts,e=b("script"),n=l(n,!0),e=l(e,!0),o.difference(n,e));i.length&&function t(e){var i=document.createElement("link"),n=e.shift();i.type="text/css",i.rel="stylesheet",i.onload=function(){e.length&&t(e)},i.href=n,document.getElementsByTagName("head")[0].appendChild(i)}(i),n.length&&d(n,t)},loadMedialibraryJS:function(t){var e,t=t.filter("script"),i=/theme=media_library/g,n=this;t.each(function(){var t;e=b(this).prop("src"),i.test(e)&&((t=document.createElement("script")).src=e,document.body.appendChild(t),n.mediaScriptAdded=!0)})},submit:function(t){var o,e=t.target,r=b(e),s=this,a=r.prop("action"),l=r.closest(".qor-bottomsheets"),d=l.data(),i=d.ajaxType,c=r.find(":submit");d.ingoreSubmit||r.data().normalSubmit||(b(document).trigger("bottomsheetBeforeSend.qor.bottomsheets"),t.preventDefault(),o=new n(e),b.ajax(a,{method:r.prop("method"),data:o,dataType:i||"html",processData:!1,contentType:!1,beforeSend:function(){c.prop("disabled",!0)},success:function(t,e,i){if(d.ajaxMute)l.remove();else if(d.ajaxTakeover)d.$target.parent().trigger("ajaxSuccessed.qor.bottomsheets",[t,l]);else{var n,t=i.getResponseHeader("Content-Disposition");if(t&&-1!==t.indexOf("attachment"))return t=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(t),i=i.getResponseHeader("Content-Type"),n="",null!=t&&t[1]&&(n=t[1].replace(/['"]/g,"")),window.QOR.qorAjaxHandleFile(a,i,n,o),void c.prop("disabled",!1);b(".qor-error").remove();t=r.data("returnUrl"),i=r.data("refreshUrl");i?window.location.href=i:"refresh"==t?s.refresh():(t&&"refresh"!=t?s.load(t):s.refresh(),b(document).trigger("bottomsheetSubmitComplete.qor.bottomsheets"))}},error:function(t){window.QOR.handleAjaxError(t)},complete:function(){c.prop("disabled",!1)}}))},load:function(s,a,l){var d,t,c=this.options,u=a.actionData,h=this.resourseData,f=h.selectModal,p=h.ingoreSubmit,m=this.$bottomsheets,y=this.$header,g=this.$body;s&&(this.show(),this.addLoading(g),this.filterURL=s,g.removeClass("has-header has-hint"),a=b.isPlainObject(a)?a:{},d=a.method||"GET",t=a.datatype||"html",b.proxy(function(){b.ajax(s,{method:d,dataType:t,success:b.proxy(function(t){var e,i,n,o,r;"GET"===d?(i={$scripts:(e=b(t)).filter("script"),$links:e.filter("link"),url:s,response:t},n=f&&e.find(".qor-search-container").length,o=t.match(/<\s*body.*>[\s\S]*<\s*\/body\s*>/gi),r=e.find(_),o&&(o=o.join("").replace(/<\s*body/gi,"<div").replace(/<\s*\/body/gi,"</div"),o=b(o).prop("class"),b("body").addClass(o)),r.length&&(this.loadExtraResource(i),p&&r.find(q).remove(),r.find(".qor-button--cancel").attr("data-dismiss","bottomsheets"),g.html(r.html()),this.$title.html(e.find(c.title).html()),a.selectDefaultCreating&&this.$title.append('<button class="mdl-button mdl-button--primary" type="button" data-load-inline="true" data-select-nohint="'.concat(a.selectNohint,'" data-select-modal="').concat(a.selectModal,'" data-select-listing-url="').concat(a.selectListingUrl,'">').concat(a.selectBacktolistTitle,"</button>")),f&&(g.find(".qor-button--new").data("ingoreSubmit",!0).data("selectId",h.selectId).data("loadInline",!0),"one"==f||a.selectNohint||void 0!==h.maxItem&&"1"==h.maxItem||g.addClass("has-hint"),"mediabox"!=f||this.mediaScriptAdded||this.loadMedialibraryJS(e)),y.find(".qor-button--new").remove(),this.$title.after(g.find(".qor-button--new")),n&&(m.addClass("has-search"),y.find(".qor-bottomsheets__search").remove(),y.prepend(w.TEMPLATE_SEARCH)),u&&u.length&&this.bindActionData(u),h.bottomsheetClassname&&m.addClass(h.bottomsheetClassname),m.trigger("enable"),m.one("hidden.qor.bottomsheets",function(){b(this).trigger("disable")}),this.addHeaderClass(),m.data(a),l&&b.isFunction(l)&&l(this.$bottomsheets),m.trigger("bottomsheetLoaded.qor.bottomsheets",[s,t]))):a.returnUrl?this.load(a.returnUrl):this.refresh()},this),error:b.proxy(function(){var t;this.$bottomsheets.remove(),b(".qor-bottomsheets").is(":visible")||b("body").removeClass(v),t=0<b(".qor-error span").length?b(".qor-error span").map(function(){return b(this).text()}).get().join(", "):e.serverError,window.alert(t)},this)})},this)())},open:function(t,e){t.loadInline||this.init(),this.resourseData=t,this.load(t.url,t,e)},show:function(){this.$bottomsheets.addClass("is-shown").get(0).offsetHeight,this.$bottomsheets.addClass("is-slided"),b("body").addClass(v)},hide:function(t){var t=b(t.target).closest(".qor-bottomsheets"),e=b(".qor-datepicker").not(".hidden");return e.length&&e.addClass("hidden"),t.qorSelectCore("destroy"),t.trigger("bottomsheetClosed.qor.bottomsheets").remove(),b(".qor-bottomsheets").is(":visible")||b("body").removeClass(v),!1},refresh:function(){this.$bottomsheets.remove(),b("body").removeClass(v),setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind(),this.$element.removeData(r)}},w.DEFAULTS={title:".qor-form-title, .mdl-layout-title",content:!1},w.TEMPLATE_ERROR='<ul class="qor-error"><li><label><i class="material-icons">error</i><span>[[error]]</span></label></li></ul>',w.TEMPLATE_LOADING='<div style="text-align: center; margin-top: 30px;"><div class="mdl-spinner mdl-js-spinner is-active qor-layout__bottomsheet-spinner"></div></div>',w.TEMPLATE_SEARCH='<div class="qor-bottomsheets__search">\n            <input autocomplete="off" type="text" class="mdl-textfield__input qor-bottomsheets__search-input" placeholder="Search" />\n            <button class="mdl-button mdl-js-button mdl-button--icon qor-bottomsheets__search-button" type="button"><i class="material-icons">search</i></button>\n        </div>',w.TEMPLATE='<div class="qor-bottomsheets">\n            <div class="qor-bottomsheets__header">\n            <h3 class="qor-bottomsheets__title"></h3>\n            <button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-bottomsheets__close" data-dismiss="bottomsheets">\n            <span class="material-icons">close</span>\n            </button>\n            </div>\n            <div class="qor-bottomsheets__body"></div>\n        </div>',b.fn.qorBottomSheets=w.plugin=function(i){return this.each(function(){var t=b(this),e=t.data(r);if(!e){if(/destroy/.test(i))return;t.data(r,e=new w(this,i))}"string"==typeof i&&b.isFunction(t=e[i])&&t.apply(e)})},w}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var n="qor.chooser",t="enable."+n;function o(t,e){this.$element=r(t),this.options=r.extend({},o.DEFAULTS,r.isPlainObject(e)&&e),this.init()}return o.prototype={constructor:o,init:function(){var i=this.$element,t=i.data(),e={minimumResultsForSearch:8,dropdownParent:i.parent()},n=window.getSelect2AjaxDynamicURL,o=t.remoteImage;t.remoteData&&(e.ajax=r.fn.select2.ajaxCommonOptions(t),n&&r.isFunction(n)?e.ajax.url=function(){return n(t)}:e.ajax.url=t.remoteUrl,e.templateResult=function(t){var e=i.parents(".qor-field").find('[name="select2-result-template"]');return r.fn.select2.ajaxFormatResult(t,e,o)},e.templateSelection=function(t){if(t.loading)return t.text;var e=i.parents(".qor-field").find('[name="select2-selection-template"]');return r.fn.select2.ajaxFormatResult(t,e,o)}),i.on("select2:select",function(t){r(t.target).attr("chooser-selected","true")}).on("select2:unselect",function(t){r(t.target).attr("chooser-selected","")}),i.select2(e),this.resetSelect2Width(),e=window._.debounce(this.resetSelect2Width.bind(this),300),r(window).resize(e),i.val()&&i.attr("chooser-selected","true")},resetSelect2Width:function(){var t=this.$element.data().select2;t&&t.$container&&(t=t.$container).width(t.parent().width())},destroy:function(){this.$element.select2("destroy").removeData(n)}},o.DEFAULTS={},o.plugin=function(i){return this.each(function(){var t=r(this),e=t.data(n);if(!e){if(/destroy/.test(i))return;t.data(n,e=new o(this,i))}"string"==typeof i&&r.isFunction(t=e[i])&&t.apply(e)})},r(function(){var e='select[data-toggle="qor.chooser"]';r(document).on("disable.qor.chooser",function(t){o.plugin.call(r(e,t.target),"destroy")}).on(t,function(t){o.plugin.call(r(e,t.target))}).triggerHandler(t)}),o}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(g){var n=window.URL||window.webkitURL,o="qor.cropper",t="enable."+o,r="change."+o,c="click."+o,e="shown.qor.modal",i="hidden.qor.modal",b=".qor-cropper__toggle",u=".qor-cropper__wrapper",h=".qor-cropper__options",s=".qor-cropper__toggle--crop";function v(t,e){var e=String(e),i=e.toLowerCase(),n=e.toUpperCase(),e=e="string"==typeof(e=e)?e.charAt(0).toUpperCase()+e.substr(1):e;if(g.isPlainObject(t))return t[i]||t[e]||t[n]}function a(t){return/.svg$/.test(t)}function _(t,e){this.$element=g(t),this.options=g.extend(!0,{},_.DEFAULTS,g.isPlainObject(e)&&e),this.data=null,this.init()}return _.prototype={constructor:_,init:function(){var t,e,i=this.options,n=this.$element,o=n.closest(i.parent),r=this;o.length||(o=n.parent()),this.$parent=o,this.$output=o.find(i.output),this.$formCropInput=o.closest("form").find('input[name="QorResource.MediaOption"]:hidden'),this.$list=o.find(i.list),(n=this.$output.data("fetchSizedata"))?g.getJSON(n,function(t){e=JSON.parse(t.MediaOption),r.$output.val(JSON.stringify(t)),r.$formCropInput.val(JSON.stringify(t)),r.data=e||{},a(e.URL||e.Url)&&r.resetImage(),r.build(),r.bind()}):((o=g.trim(this.$output.val()))&&a((t=JSON.parse(o)).URL||t.Url)&&this.resetImage(),this.data=t||{},this.build(),this.bind())},resetImage:function(){this.$parent.addClass("is-svg")},build:function(){var t,i,e=this.$output.data(),n={};e&&(n={title:e.cropperTitle,ok:e.cropperOk,cancel:e.cropperCancel},t=this.options.text),n.ok&&n.title&&n.cancel&&(t=n),this.wrap(),this.$modal=g((e=t,"string"==typeof(i=_.MODAL)&&"object"===_typeof(e)&&g.each(e,function(t,e){i=i.replace("$["+String(t).toLowerCase()+"]",e)}),i)).appendTo("body")},unbuild:function(){this.$modal.remove(),this.unwrap()},wrap:function(){var t=this.$list,e=t.find("img").not(".is-svg");e.length?(t.find("li").append(_.TOGGLE),e.wrap(_.CANVAS),this.center(e)):t.find(s).remove()},unwrap:function(){var t=this.$list;t.find(b).remove(),t.find(".qor-cropper__canvas").each(function(){var t=g(this);t.before(t.html()).remove()})},bind:function(){this.$element.on(r,g.proxy(this.read,this)),this.$list.on(c,g.proxy(this.click,this)),this.$modal.on(e,g.proxy(this.start,this)).on(i,g.proxy(this.stop,this))},unbind:function(){this.$element.off(r,this.read),this.$list.off(c,this.click),this.$modal.off(e,this.start).off(i,this.stop)},click:function(t){var e,t=t.target,i=this.data;t!==this.$list[0]&&((t=g(t)).closest(".qor-cropper__toggle--delete").length&&(i.Delete=!0,this.$output.val(JSON.stringify(i)),this.$formCropInput.val(JSON.stringify(i)),this.$list.hide(),(e=g(_.ALERT)).find(".qor-fieldset__undo").one(c,function(){e.remove(),this.$list.show(),delete i.Delete,this.$output.val(JSON.stringify(i)),this.$formCropInput.val(JSON.stringify(i))}.bind(this)),this.$parent.find(".qor-fieldset").append(e)),t.closest(s).length&&(t=t.closest("li").find("img"),this.$target=t,this.$modal.qorModal("show")))},read:function(t){var t=t.target.files,e=this.$list,i=this.$parent.find(".qor-fieldset__alert");e.show(),i.length&&i.remove(),t&&t.length&&(i=t[0],/^image\//.test(i.type)&&n?(this.fileType=i.type,this.load(n.createObjectURL(i)),this.$parent.find(".qor-medialibrary__image-desc").show()):e.empty().html(_.FILE_LIST.replace("{{filename}}",i.name)))},load:function(t,a,l){var d,c=this.options,u=this,h=this.$list,e=g(_.LIST),f=this.data||{},p=this.$output.val()?JSON.parse(this.$output.val()):{},m=["Video","SelectedType","Description"],y=this.fileType;a||(h.find("ul").remove(),h.html(e)),e=h.find("img"),this.wrap(),d=e.length,e.one("load",function(){if("image/svg+xml"===y)return h.find(b).remove(),!1;var t=g(this),e=this.naturalWidth,i=this.naturalHeight,n=t.data(),o=n.sizeResolution,r=n.sizeName,s=n.sizeResolutionWidth,n=n.sizeResolutionHeight;o?(s||n||(s=v(o,"width"),n=v(o,"height")),e<i*(o=n&&s?s/n:e/i)?n=(s=e)/o:s=(n=i)*o,o={naturalWidth:e,naturalHeight:i},e={x:Math.round((e-s)/2),y:Math.round((i-n)/2),width:Math.round(s),height:Math.round(n)},u.preview(t,o,e),r&&(f.Crop=!0,f[c.key]||(f[c.key]={}),"original"!=r&&(f[c.key][r]=e))):u.center(t),""!==f.Crop&&a||delete f.Crop,a||(f.CropOptions=null,delete f.Sizes),delete f.Delete,m.forEach(function(t){p[t]&&(f[t]=p[t])}),u.$output.val(JSON.stringify(f)),u.$formCropInput.val(JSON.stringify(f)),r&&f[c.key]&&Object.keys(f[c.key]).length>=d&&l&&g.isFunction(l)&&l()}).attr("src",t).data("originalUrl",t),h.show()},start:function(){var o=this.options,r=this.$modal,t=this.$target,e=t.data(),s=e.sizeName||"original",i=e.sizeResolution,t=e&&e.originalUrl&&t.attr("data-original-url")?/\.original\./.test(e.originalUrl)?e.originalUrl:/\.original\./.test(t.attr("data-original-url"))?t.attr("data-original-url"):t.attr("data-original-url").replace(/file\./,"file.original."):t.attr("src"),a=g("<img src=".concat(t,">")),l=this.data||{},d=this,t=NaN,n=e.sizeResolutionWidth,e=e.sizeResolutionHeight;i&&(n||e||(n=v(i,"width"),e=v(i,"height")),t=n/e),l[o.key]||(l[o.key]={}),r.trigger("enable.qor.material").find(u).html(a),(i=this.getList(t))&&r.find(h).show().append(i),a.cropper({aspectRatio:t,data:function(t){var e,i={};if(g.isPlainObject(t))for(e in t)t.hasOwnProperty(e)&&(i[String(e).toLowerCase()]=t[e]);return i}(l[o.key][s]),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,autoCropArea:1,ready:function(){r.find(".qor-cropper__options-toggle").on(c,function(){r.find(".qor-cropper__options-input").prop("checked",g(this).prop("checked"))}).prop("checked",!0),r.find(".qor-cropper__save").one(c,function(){var t,e=a.cropper("getData",!0),i=a.cropper("getCroppedCanvas"),n=[];if(l.Crop=!0,l[o.key][s]=e,d.imageData=a.cropper("getImageData"),d.cropData=e,i)try{t=i.toDataURL()}catch(t){console.log(t),console.log("Please check image Cross-origin setting")}r.find(h+" input").each(function(){var t=g(this);t.prop("checked")&&n.push(t.attr("name"))}),d.output(t,n),r.qorModal("hide")})}})},stop:function(){this.$modal.trigger("disable.qor.material").find(u+" > img").cropper("destroy").remove().end().find(h).hide().find("ul").remove()},getList:function(o){var r=[];return this.$list.find("img").not(this.$target).each(function(){var t=g(this).data(),e=t.sizeResolution,i=t.sizeName,n=t.sizeResolutionWidth,t=t.sizeResolutionHeight;e&&(n||t||(n=v(e,"width"),t=v(e,"height")),n/t===o&&r.push('<label><input class="qor-cropper__options-input" type="checkbox" name="'+i+'" checked> <span>'+i+"<small>("+n+"&times;"+t+" px)</small></span></label>"))}),r.length?"<ul><li>"+r.join("</li><li>")+"</li></ul>":""},output:function(t,e){var i=this.$target;t?this.center(i.attr("src",t),!0):this.preview(i),g.isArray(e)&&e.length&&this.autoCrop(t,e),this.$output.val(JSON.stringify(this.data)).trigger(r),this.$formCropInput.val(JSON.stringify(this.data))},preview:function(t,e,i){var n=t.parent().parent(),o=n.width(),n=n.height(),e=e||this.imageData,i=g.extend({},i||this.cropData),r=i.width/i.height,s=o;0!=s&&0!=e.naturalWidth&&0!=e.naturalHeight&&(i=i.width/(s=n*r<=o?n*r:s),t.css({maxWidth:e.naturalWidth/i,maxHeight:e.naturalHeight/i}),this.center(t))},center:function(t,o){t.each(function(){var t=g(this),i=t.parent(),n=i.parent();function e(){var t=n.height(),e=i.height(),t=e<t?(t-e)/2:"auto";i.css("margin-top",t)}o&&i.add(t).removeAttr("style"),this.complete?e.call(this):this.onload=e})},autoCrop:function(i,n){var o=this.cropData,r=this.data[this.options.key],s=this;this.$list.find("img").not(this.$target).each(function(){var t=g(this),e=t.data("sizeName");-1<g.inArray(e,n)&&(r[e]=g.extend({},o),i?s.center(t.attr("src",i),!0):s.preview(t))})},destroy:function(){this.$element.removeData(o)}},_.DEFAULTS={parent:!1,output:!1,list:!1,key:"data",data:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},_.TOGGLE='<div class="qor-cropper__toggle">\n            <div class="qor-cropper__toggle--crop"><i class="material-icons">crop</i></div>\n            <div class="qor-cropper__toggle--delete"><i class="material-icons">delete</i></div>\n        </div>',_.ALERT='<div class="qor-fieldset__alert">\n            <button class="mdl-button mdl-button--accent qor-fieldset__undo" type="button">Undo delete</button>\n        </div>',_.CANVAS='<div class="qor-cropper__canvas"></div>',_.LIST="<ul><li><img></li></ul>",_.FILE_LIST='<div class="qor-file__list-item">\n                                <span><span>{{filename}}</span></span>\n                                <div class="qor-cropper__toggle">\n                                    <div class="qor-cropper__toggle--delete"><i class="material-icons">delete</i></div>\n                                </div>\n                            </div>',_.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                    <h2 class="mdl-card__title-text">$[title]</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                    <div class="qor-cropper__wrapper"></div>\n                    <div class="qor-cropper__options">\n                        <p>Sync cropping result to: <label><input type="checkbox" class="qor-cropper__options-toggle" checked/> All</label></p>\n                    </div>\n                </div>\n                <div class="mdl-card__actions mdl-card--border">\n                    <a class="mdl-button mdl-button--colored mdl-button--raised qor-cropper__save">$[ok]</a>\n                    <a class="mdl-button mdl-button--colored" data-dismiss="modal">$[cancel]</a>\n                </div>\n                <div class="mdl-card__menu">\n                    <button class="mdl-button mdl-button--icon" data-dismiss="modal" aria-label="close">\n                        <i class="material-icons">close</i>\n                    </button>\n                </div>\n            </div>\n        </div>',_.plugin=function(n){return this.each(function(){var t,e=g(this),i=e.data(o);if(!i){if(!g.fn.cropper)return;if(/destroy/.test(n))return;t=g.extend(!0,{},e.data(),"object"===_typeof(n)&&n),e.data(o,i=new _(this,t))}"string"==typeof n&&g.isFunction(e=i[n])&&e.apply(i)})},g(function(){var e=".qor-file__input",i={parent:".qor-file",output:".qor-file__options",list:".qor-file__list",key:"CropOptions"};g(document).on(t,function(t){_.plugin.call(g(e,t.target),i)}).on("disable.qor.cropper",function(t){_.plugin.call(g(e,t.target),"destroy")}).triggerHandler(t)}),_}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var o="qor.datepicker",t="enable."+o,s="pick."+o,a="click."+o,l=".qor-datepicker__embedded",d=".qor-datepicker__save";function c(t,e){this.$element=r(t),this.options=r.extend(!0,{},c.DEFAULTS,r.isPlainObject(e)&&e),this.date=null,this.formatDate=null,this.built=!1,this.pickerData=this.$element.data(),this.$parent=this.$element.closest("[data-picker-type]"),this.isDateTimePicker="datetime"==this.$parent.data("picker-type"),this.$targetInput=this.$parent.find(this.pickerData.targetInput||(this.isDateTimePicker?".qor-datetimepicker__input":".qor-datepicker__input")),this.init()}return c.prototype={init:function(){this.$targetInput.is(":disabled")?this.$element.remove():this.bind()},bind:function(){this.$element.on(a,r.proxy(this.show,this))},unbind:function(){this.$element.off(a,this.show)},build:function(){var i,t=this.$element,e=this.$targetInput,n=e.val(),o={date:new Date,inline:!0};this.built||(t.is(":input")&&Date.parse(t.val())?o.date=new Date(t.val()):n&&Date.parse(n)&&(o.date=new Date(n)),this.$modal=n=r((i=c.TEMPLATE,t=this.options.text,"string"==typeof i&&"object"===_typeof(t)&&r.each(t,function(t,e){i=i.replace("$["+String(t).toLowerCase()+"]",e)}),i)).appendTo("body"),e.data("start-date")&&(o.startDate=new Date(e.data("start-date"))),e.data("end-date")&&(o.endDate=new Date(e.data("end-date"))),n.find(l).on(s,r.proxy(this.change,this)).qorDatepicker(o).triggerHandler(s),n.find(d).on(a,r.proxy(this.pick,this)),this.built=!0)},unbuild:function(){this.built&&this.$modal.find(l).off(s,this.change).qorDatepicker("destroy").end().find(d).off(a,this.pick).end().remove()},change:function(t){var e,i=this.$modal,t=r(t.target);this.date=e=t.qorDatepicker("getDate"),this.formatDate=t.qorDatepicker("getDate",!0),i.find(".qor-datepicker__picked-year").text(e.getFullYear()),i.find(".qor-datepicker__picked-date").text([t.qorDatepicker("getDayName",e.getDay(),!0)+",",String(t.qorDatepicker("getMonthName",e.getMonth(),!0)),e.getDate()].join(" "))},show:function(){this.built||this.build(),this.$modal.qorModal("show")},pick:function(){var t,e,i=this.$targetInput,n=this.formatDate;this.isDateTimePicker&&(t=/^\d{4}-\d{1,2}-\d{1,2}/,e=i.val(),t.test(e)?n=e.replace(t,n):n+=" 00:00"),i.val(n).trigger("change"),this.$modal.qorModal("hide")},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(o)}},c.DEFAULTS={text:{title:"Pick a date",ok:"OK",cancel:"Cancel"}},c.TEMPLATE='<div class="qor-modal fade qor-datepicker" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n                <div class="mdl-card__title">\n                    <h2 class="mdl-card__title-text">$[title]</h2>\n                </div>\n                <div class="mdl-card__supporting-text">\n                    <div class="qor-datepicker__picked">\n                        <div class="qor-datepicker__picked-year"></div>\n                        <div class="qor-datepicker__picked-date"></div>\n                    </div>\n                    <div class="qor-datepicker__embedded"></div>\n                </div>\n                <div class="mdl-card__actions">\n                    <a class="mdl-button mdl-button--colored  mdl-button--raised qor-datepicker__save">$[ok]</a>\n                    <a class="mdl-button mdl-button--colored " data-dismiss="modal">$[cancel]</a>\n                </div>\n            </div>\n        </div>',c.plugin=function(n){return this.each(function(){var t,e=r(this),i=e.data(o);if(!i){if(!r.fn.qorDatepicker)return;if(/destroy/.test(n))return;t=r.extend(!0,{},e.data(),"object"===_typeof(n)&&n),e.data(o,i=new c(this,t))}"string"==typeof n&&r.isFunction(e=i[n])&&e.apply(i)})},r(function(){var e='[data-toggle="qor.datepicker"]';r(document).on("disable.qor.datepicker",function(t){c.plugin.call(r(e,t.target),"destroy")}).on(t,function(t){c.plugin.call(r(e,t.target))}).triggerHandler(t)}),c}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(c){c.fn.extend({dirtyForm:function a(t,l){var d=!1;return this instanceof jQuery?(l=t,t=this):t instanceof jQuery||(t=c(t)),t.each(function(t,e){var i=c(e);if(i.is("form"))return!i.hasClass("ignore-dirtyform")&&(!(d=a(i.find('input:not([type="hidden"]):not(".search-field input"):not(".chosen-search input"):not(".ignore-dirtyform"), textarea, select'),l))&&void 0);if(i.is(":checkbox")||i.is(":radio"))return!i.hasClass("ignore-dirtyform")&&(e.checked!=e.defaultChecked?!(d=!0):void 0);if(i.is("input")||i.is("textarea"))return!i.hasClass("ignore-dirtyform")&&(e.value!=e.defaultValue?!(d=!0):void 0);if(i.is("select")){if(i.hasClass("ignore-dirtyform"))return!1;for(var n,o=0,r=e.options.length,s=0;s<r;s++)n=e.options[s],d=d||n.selected!=n.defaultSelected,n.defaultSelected&&(o=s);return(d=d&&!e.multiple?o!=e.selectedIndex:d)?!1:void 0}}),d}}),c(function(){c(document).on("submit","form",function(){c.fn.qorSlideoutBeforeHide=null}),c(document).on("change","form",function(){c(this).dirtyForm()?c.fn.qorSlideoutBeforeHide=!0:c.fn.qorSlideoutBeforeHide=null})})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var a=window.location,e=s(document),n="qor.filter",t="enable."+n,i="click."+n,o=".qor-bottomsheets",l=".qor-filter__dropdown",r="is-selected";function d(t,e){this.$element=s(t),this.options=s.extend({},d.DEFAULTS,s.isPlainObject(e)&&e),this.init()}return d.prototype={constructor:d,init:function(){this.bind();var t=this.$element,e=window.moment();this.$timeStart=t.find(".qor-filter__start"),this.$timeEnd=t.find(".qor-filter__end"),this.$searchParam=t.find("[data-search-param]"),this.$searchButton=t.find(this.options.button),this.startWeekDate=e.startOf("isoweek").toDate(),this.endWeekDate=e.endOf("isoweek").toDate(),this.startMonthDate=e.startOf("month").toDate(),this.endMonthDate=e.endOf("month").toDate(),this.initActionTemplate()},bind:function(){var t=this.options;this.$element.on(i,t.trigger,this.show.bind(this)).on(i,t.label,this.setFilterTime.bind(this)).on(i,t.clear,this.clear.bind(this)).on(i,t.button,this.search.bind(this)),e.on(i,this.close)},unbind:function(){this.$element.off(i)},initActionTemplate:function(){var t=this.$element.data("schedule-from"),e=this.$element.data("schedule-to"),t=this.getUrlParameter(t||"schedule_start_at"),e=this.getUrlParameter(e||"schedule_end_at"),i=s(this.options.trigger);(t||e)&&(this.$timeStart.val(t),this.$timeEnd.val(e),e=e?" - "+e:"",i.addClass("active clearable").find(".qor-selector-label").html(t+e),i.append('<i class="material-icons qor-selector-clear">clear</i>'))},show:function(){this.$element.find(l).toggle()},close:function(t){var t=s(t.target),e=s(l),i=e.is(":visible"),n=t.closest(l).length,o=t.closest(".qor-filter-toggle").length,r=t.closest(".qor-modal").length,t=t.closest(".ui-timepicker-wrapper").length;i&&(n||o||r||t)||e.hide()},setFilterTime:function(t){var e,i,t=s(t.target),n=t.data(),o=n.filterRange;if(!o)return!1;if(s(this.options.label).removeClass(r),t.addClass(r),"events"==o)return this.$timeStart.val(n.scheduleStartAt||""),this.$timeEnd.val(n.scheduleEndAt||""),this.$searchButton.click(),!1;switch(o){case"today":e=i=new Date;break;case"week":e=this.startWeekDate,i=this.endWeekDate;break;case"month":e=this.startMonthDate,i=this.endMonthDate}if(!e||!i)return!1;t=this.getTime(e)+" 00:00",n=this.getTime(i)+" 23:59",this.$timeStart.val(t),this.$timeEnd.val(n),this.$searchButton.click()},getTime:function(t){var e=(e=t.getMonth()+1)<10?"0"+e:e,i=(i=t.getDate())<10?"0"+i:i;return t.getFullYear()+"-"+e+"-"+i},clear:function(){var t=s(this.options.trigger),e=t.find(".qor-selector-label");return t.removeClass("active clearable"),e.html(e.data("label")),this.$timeStart.val(""),this.$timeEnd.val(""),this.$searchButton.click(),!1},getUrlParameter:function(t){var e=decodeURIComponent(a.search),t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),t=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return null===t?"":t[1].replace(/\+/g," ")},updateQueryStringParameter:function(t,e,i){var i=i||a.href,n=i.match(/#\S*$/)||"",o=String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"),o=new RegExp("([?&])"+o+"=.*?(&|$)","i"),r=-1!==i.indexOf("?")?"&":"?";return n&&(n=n[0],i=i.replace(n,"")),i.match(o)?i=e?i.replace(o,"$1"+t+"="+e+"$2"):"?"===RegExp.$1||RegExp.$1===RegExp.$2?i.replace(o,"$1"):i.replace(o,""):e&&(i=i+r+t+"="+e),i+n},search:function(){var t=this.$searchParam,i=a.href,n=this;t.length&&(t.each(function(){var t=s(this),e=t.data().searchParam,t=t.val();i=n.updateQueryStringParameter(e,t,i)}),this.$element.closest(o).length?s(o).trigger("filterChanged.qor.filter",[i,"qor.filter.time"]):a.href=i)},destroy:function(){this.unbind(),this.$element.removeData(n)}},d.DEFAULTS={label:!1,trigger:!1,button:!1,clear:!1},d.plugin=function(i){return this.each(function(){var t=s(this),e=t.data(n);if(!e){if(/destroy/.test(i))return;t.data(n,e=new d(this,i))}"string"==typeof i&&s.isFunction(t=e[i])&&t.apply(e)})},s(function(){var e='[data-toggle="qor.filter.time"]',i={label:".qor-filter__block-buttons button",trigger:"a.qor-filter-toggle",button:".qor-filter__button-search",clear:".qor-selector-clear"};s(document).on("disable.qor.filter",function(t){d.plugin.call(s(e,t.target),"destroy")}).on(t,function(t){d.plugin.call(s(e,t.target),i)}).triggerHandler(t)}),d}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(d){var c=window.location,n="qor.filter",t="enable."+n,e="click."+n,i="change."+n,u=".qor-bottomsheets";function h(t,i){var n,e=c.search,o=c.search.match(/per_page=\d+/),e=e.replace(/per_page=\d+/g,"").replace(/page=\d+/,"page=1");return o&&o.length&&(e=e+"&"+o[0]),d.isArray(t)&&(n=f(e),d.each(t,function(t,e){-1===(t=d.inArray(e,n))?n.push(e):i&&n.splice(t,1)}),e="?"+n.join("&")),e}function f(t){var e=[];return e=t&&-1<t.indexOf("?")&&(t=(t=t.replace(/\+/g," ").split("?")[1])&&-1<t.indexOf("#")?t.split("#")[0]:t)?d.map(t.split("&"),function(t){var e=[],i=(t=t.split("="))[1];return e.push(t[0]),(i=i&&d.trim(i))&&e.push(i),e.join("=")}):e}function o(t,e){this.$element=d(t),this.options=d.extend({},o.DEFAULTS,d.isPlainObject(e)&&e),this.init()}return o.prototype={constructor:o,init:function(){this.bind()},bind:function(){var t=this.options;this.$element.on(e,t.label,d.proxy(this.toggle,this)).on(i,t.group,d.proxy(this.toggle,this))},unbind:function(){this.$element.off(e,this.toggle).off(i,this.toggle)},toggle:function(t){var i,e,n,o,r,s,a=d(t.currentTarget),l=[];a.is("select")?(i=f(c.search),s=n=encodeURIComponent(a.attr("name")),o=a.val(),e=[n],o&&e.push(encodeURIComponent(o)),e=e.join("="),o&&l.push(e),a.children().each(function(){var t=d(this),e=[n],t=d.trim(t.prop("value"));if(t&&e.push(encodeURIComponent(t)),e=e.join("="),-1<d.inArray(e,i))return r=e,!1}),o=r?(l.push(r),h(l,!0)):h(l)):a.is("a")&&(t.preventDefault(),s=a.data().paramName,l=f(a.attr("href")),o=a.hasClass("is-active")?h(l,!0):h(l)),this.$element.closest(u).length?d(u).trigger("filterChanged.qor.filter",[o,s]):c.search=o},destroy:function(){this.unbind(),this.$element.removeData(n)}},o.DEFAULTS={label:!1,group:!1},o.plugin=function(i){return this.each(function(){var t=d(this),e=t.data(n);if(!e){if(/destroy/.test(i))return;t.data(n,e=new o(this,i))}"string"==typeof i&&d.isFunction(t=e[i])&&t.apply(e)})},d(function(){var e='[data-toggle="qor.filter"]',i={label:"a",group:"select"};d(document).on("disable.qor.filter",function(t){o.plugin.call(d(e,t.target),"destroy")}).on(t,function(t){o.plugin.call(d(e,t.target),i)}).triggerHandler(t)}),o}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var t=s(window),n="qor.fixer",o="enable."+n,e="resize."+n,i="scroll."+n,a="qor-table-fixed-header";function r(t,e){this.$element=s(t),this.options=s.extend({},r.DEFAULTS,s.isPlainObject(e)&&e),this.init()}return r.prototype={constructor:r,init:function(){var t=this.options,e=this.$element;this.isNeedBuild()||(this.$thead=e.find("> thead"),this.$tbody=e.find("> tbody"),this.$header=s(t.header),this.$subHeader=s(t.subHeader),this.$content=s(t.content),this.marginBottomPX=parseInt(this.$subHeader.css("marginBottom")),this.paddingHeight=t.paddingHeight,this.resize(),this.bind())},bind:function(){this.$content.on(i,this.toggle.bind(this)),t.on(e,this.resize.bind(this))},unbind:function(){this.$content.off(i,this.toggle).off(e,this.resize)},isNeedBuild:function(){var t=this.$element;return!!(1<s(".qor-page__body .qor-js-table").length||0<s(".qor-global-search--container").length||t.hasClass("qor-table--medialibrary")||t.is(":hidden")||t.find("tbody > tr:visible").length<=1||t.data("disable-fixer"))},build:function(){var e=[];this.$tbody.find("> tr:first").children().each(function(){var t=s(this).outerWidth();s(this).outerWidth(t),e.push(t)}),this.$thead.find(">tr").children().each(function(t){s(this).outerWidth(e[t])})},toggle:function(){var t,e,i,n,o,r;this.$content.length&&(t=this.$element,e=this.$thead,i=this.$content.scrollTop(),n=this.$subHeader.outerHeight()+this.paddingHeight+this.marginBottomPX,o=s(".qor-page__header").outerHeight(),r=this.$content.offset().top+s(".qor-page__header").height(),n-o<i?(e.css({top:r}),t.addClass(a)):t.removeClass(a))},resize:function(){this.build(),this.toggle()},destroy:function(){this.buildCheck()||(this.unbind(),this.$element.removeData(n))}},r.DEFAULTS={header:!1,content:!1},r.plugin=function(i){return this.each(function(){var t=s(this),e=t.data(n);e||t.data(n,e=new r(this,i)),"string"==typeof i&&s.isFunction(t=e[i])&&t.call(e)})},s(function(){var e=".qor-js-table",i={header:".mdl-layout__header",subHeader:".qor-page__header",content:".mdl-layout__content",paddingHeight:2};s(document).on("disable.qor.fixer",function(t){r.plugin.call(s(e,t.target),"destroy")}).on(o,function(t){r.plugin.call(s(e,t.target),i)}).triggerHandler(o)}),r}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var n="qor.inlineEdit",t="enable."+n,e="click."+n,i="mouseenter."+n,o="mouseleave."+n,a=".qor-field",l=".qor-field__show",r=".qor-inlineedit__edit",d=".qor-inlineedit__buttons",c="qor-inlineedit__field";function u(t,e){this.$element=s(t),this.options=s.extend({},u.DEFAULTS,s.isPlainObject(e)&&e),this.init()}return u.prototype={constructor:u,init:function(){var t=this.$element,e=t.data("button-save"),t=t.data("button-cancel");this.TEMPLATE_SAVE='<div class="qor-inlineedit__buttons">\n                                        <button class="mdl-button mdl-button--colored mdl-js-button qor-button--small qor-inlineedit__cancel" type="button">'.concat(t,'</button>\n                                        <button class="mdl-button mdl-button--colored mdl-js-button qor-button--small qor-inlineedit__save" type="button">').concat(e,"</button>\n                                      </div>"),this.bind()},bind:function(){this.$element.on(i,l,this.showEditButton).on(o,l,this.hideEditButton).on(e,".qor-inlineedit__cancel",this.hideEdit).on(e,".qor-inlineedit__save",this.saveEdit).on(e,r,this.showEdit.bind(this))},unbind:function(){this.$element.off(i).off(o).off(e)},showEditButton:function(t){var e=s(u.TEMPLATE_EDIT);if(s(t.target).closest(a).find("input:disabled, textarea:disabled,select:disabled").length)return!1;e.appendTo(s(this))},hideEditButton:function(){s(".qor-inlineedit__edit").remove()},showEdit:function(t){t=s(t.target).closest(r).hide().closest(a).addClass(c);s(this.TEMPLATE_SAVE).appendTo(t)},hideEdit:function(){s(this).closest(a).removeClass(c).find(d).remove()},saveEdit:function(){var n=s(this),o=n.closest(a),t=n.closest("form"),e=o.closest(".qor-fieldset").find('input.qor-hidden__primary_key[type="hidden"]'),i=o.find('input[name*="QorResource"],textarea[name*="QorResource"],select[name*="QorResource"]'),r=i.length&&i.prop("name").match(/\.\w+/g),i=i.serialize();e.length&&(i="".concat(i,"&").concat(e.serialize())),r.length&&s.ajax(t.prop("action"),{method:t.prop("method"),data:i,dataType:"json",beforeSend:function(){n.prop("disabled",!0)},success:function(t){var t=function(t,e){var i,n=e[t[0].slice(1)];if(1<t.length)for(var o=1;o<t.length;o++)i=t[o].slice(1),n=(s.isArray(n)?n[0]:n)[i];return n}(r,t),e=o.removeClass(c).find(l),i=e.find(".qor-field__show-inner");("string"==typeof t||t instanceof String)&&(t=t.escapeSymbol()),(i.length?i:e).html(t),o.find(d).remove(),n.prop("disabled",!1)},error:function(t){window.QOR.handleAjaxError(t),n.prop("disabled",!1)}})},destroy:function(){this.unbind(),this.$element.removeData(n)}},u.DEFAULTS={},u.TEMPLATE_EDIT='<button class="mdl-button mdl-js-button mdl-button--icon mdl-button--colored qor-inlineedit__edit" type="button"><i class="material-icons">mode_edit</i></button>',u.plugin=function(i){return this.each(function(){var t=s(this),e=t.data(n);e||t.data(n,e=new u(this,i)),"string"==typeof i&&s.isFunction(t=e[i])&&t.call(e)})},s(function(){var e='[data-toggle="qor.inlineEdit"]',i={};s(document).on("disable.qor.inlineEdit",function(t){u.plugin.call(s(e,t.target),"destroy")}).on(t,function(t){u.plugin.call(s(e,t.target),i)}).triggerHandler(t)}),u}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(e){var i=window.componentHandler,n='[class*="mdl-js"],[class*="mdl-tooltip"]';function o(t){i&&(e(t).is(n)?i.upgradeElements(t):i.upgradeElements(e(n,t).toArray()))}function r(t){i&&(e(t).is(n)?i.downgradeElements(t):i.downgradeElements(e(n,t).toArray()))}e(function(){e(document).on("enable.qor.material",function(t){o(t.target)}).on("disable.qor.material",function(t){r(t.target)}).on("update.qor.material",function(t){r(t.target),o(t.target)})})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(n){var o=n(document),r="qor.modal",t="click."+r,e="keyup."+r,s="transitionend",a="qor-modal-open",l="in",i="aria-hidden";function d(t,e){this.$element=n(t),this.options=n.extend({},d.DEFAULTS,n.isPlainObject(e)&&e),this.transitioning=!1,this.fadable=!1,this.init()}return d.prototype={constructor:d,init:function(){this.fadable=this.$element.hasClass("fade"),this.options.show?this.show():this.toggle()},bind:function(){this.$element.on(t,n.proxy(this.click,this)),this.options.keyboard&&o.on(e,n.proxy(this.keyup,this))},unbind:function(){this.$element.off(t,this.click),this.options.keyboard&&o.off(e,this.keyup)},click:function(t){var e=this.$element[0],i=t.target;if(i===e&&this.options.backdrop)this.hide();else for(;i!==e;){if("modal"===n(i).data("dismiss")){this.hide();break}i=i.parentNode}},keyup:function(t){27===t.which&&this.hide()},show:function(t){var e,i=this.$element;if(!this.transitioning&&!i.hasClass(l)&&(e=n.Event("show.qor.modal"),i.trigger(e),!e.isDefaultPrevented())){if(o.find("body").addClass(a),i.addClass("shown").scrollTop(0).get(0).offsetHeight,this.transitioning=!0,t||!this.fadable)return i.addClass(l),void this.shown();i.one(s,n.proxy(this.shown,this)),i.addClass(l)}},shown:function(){this.transitioning=!1,this.bind(),this.$element.attr(i,!1).trigger("shown.qor.modal").focus()},hide:function(t){var e,i=this.$element;if(!this.transitioning&&i.hasClass(l)&&(e=n.Event("hide.qor.modal"),i.trigger(e),!e.isDefaultPrevented())){if(o.find("body").removeClass(a),this.transitioning=!0,t||!this.fadable)return i.removeClass(l),void this.hidden();i.one(s,n.proxy(this.hidden,this)),i.removeClass(l)}},hidden:function(){this.transitioning=!1,this.unbind(),this.$element.removeClass("shown").attr(i,!0).trigger("hidden.qor.modal")},toggle:function(){this.$element.hasClass(l)?this.hide():this.show()},destroy:function(){this.$element.removeData(r)}},d.DEFAULTS={backdrop:!1,keyboard:!0,show:!0},n.fn.qorModal=d.plugin=function(i){return this.each(function(){var t=n(this),e=t.data(r);if(!e){if(/destroy/.test(i))return;t.data(r,e=new d(this,i))}"string"==typeof i&&n.isFunction(t=e[i])&&t.apply(e)})},n(function(){var e=".qor-modal";n(document).on(t,'[data-toggle="qor.modal"]',function(){var t=n(this),e=t.data(),t=n(e.target||t.attr("href"));d.plugin.call(t,t.data(r)?"toggle":e)}).on("disable.qor.modal",function(t){d.plugin.call(n(e,t.target),"destroy")}).on("enable.qor.modal",function(t){d.plugin.call(n(e,t.target))})}),d}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var n="qor.tabbar.radio",t="enable."+n,e="click."+n,s="[data-tab-target]",a="is-active";function o(t,e){this.$element=r(t),this.options=r.extend({},o.DEFAULTS,r.isPlainObject(e)&&e),this.init()}return o.prototype={constructor:o,init:function(){this.bind()},bind:function(){this.$element.on(e,s,this.switchTab.bind(this))},unbind:function(){this.$element.off(e,s,this.switchTab)},switchTab:function(t){var t=r(t.target),e=this.$element,i=e.find(s),n=e.find("[data-tab-source]"),o=t.data().tabTarget;t.hasClass(a)||(i.removeClass(a),t.addClass(a),n.hide().filter('[data-tab-source="'+o+'"]').show(),e.trigger("switched.qor.tabbar.radio",[e,o]))},destroy:function(){this.unbind()}},o.DEFAULTS={},o.plugin=function(i){return this.each(function(){var t=r(this),e=t.data(n);if(!e){if(/destroy/.test(i))return;t.data(n,e=new o(this,i))}"string"==typeof i&&r.isFunction(t=e[i])&&t.apply(e)})},r(function(){var e='[data-toggle="qor.tab.radio"]';r(document).on("disable.qor.tabbar.radio",function(t){o.plugin.call(r(e,t.target),"destroy")}).on(t,function(t){o.plugin.call(r(e,t.target))}).triggerHandler(t)}),o}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(c){var o="qor.redactor",t="enable."+o,l="click."+o,e="addCrop."+o,i="removeCrop."+o,r="scroll."+o,n=".qor-cropper__toggle--redactor";function s(t,e){this.$element=c(t),this.options=c.extend(!0,{},s.DEFAULTS,c.isPlainObject(e)&&e),this.init()}return s.prototype={constructor:s,init:function(){var i,t=this.options,e=this.$element,n=e.closest(t.parent);n.length||(n=e.parent()),this.$parent=n,this.$button=c(s.BUTTON),this.$modal=c((i=s.MODAL,e=t.text,"string"==typeof i&&"object"===_typeof(e)&&c.each(e,function(t,e){i=i.replace("$["+String(t).toLowerCase()+"]",e)}),i)).appendTo("body"),this.bind()},bind:function(){this.$element.on(e,c.proxy(this.addButton,this)).on(i,c.proxy(this.removeButton,this))},unbind:function(){this.$element.off(e).off(i).off(r)},addButton:function(t,e){var i=c(e);this.$button.css("left",c(e).width()/2).prependTo(i.parent()).find(n).one(l,c.proxy(this.crop,this,i))},removeButton:function(){this.$button.find(n).off(l),this.$button.detach()},crop:function(n){var o,r=this.options,s=n.attr("src"),t=s,a=this.$modal;c.isFunction(r.replace)&&(t=r.replace(t)),o=c("<img src='".concat(t,"'>")),a.one("shown.qor.modal",function(){var t,e;o.cropper({data:(t=n.attr("data-crop-options"),e=t&&t.split(","),t=null,t=e&&4===e.length?{x:Number(e[0]),y:Number(e[1]),width:Number(e[2]),height:Number(e[3])}:t),background:!1,movable:!1,zoomable:!1,scalable:!1,rotatable:!1,checkImageOrigin:!1,ready:function(){a.find(".qor-cropper__save").one(l,function(){var i=o.cropper("getData",!0);c.ajax(r.remote,{type:"POST",contentType:"application/json",data:JSON.stringify({Url:s,CropOptions:{original:function(t){var e,i,n={};if(c.isPlainObject(t))for(e in t)t.hasOwnProperty(e)&&(n[i="string"==typeof(i=e)?i.charAt(0).toUpperCase()+i.substr(1):i]=t[e]);return n}(i)},Crop:!0}),dataType:"json",success:function(t){var e;c.isPlainObject(t)&&t.url&&(n.attr("src",t.url).attr("data-crop-options",(t=i,e=[],c.isPlainObject(t)&&c.each(t,function(){e.push(arguments[1])}),e.join())).removeAttr("style").removeAttr("rel"),c.isFunction(r.complete)&&r.complete(),a.qorModal("hide"))}})})}})}).one("hidden.qor.modal",function(){o.cropper("destroy").remove()}).qorModal("show").find(".qor-cropper__wrapper").append(o)},destroy:function(){this.unbind(),this.$modal.qorModal("hide").remove(),this.$element.removeData(o)}},s.DEFAULTS={remote:!1,parent:!1,toggle:!1,replace:null,complete:null,text:{title:"Crop the image",ok:"OK",cancel:"Cancel"}},s.BUTTON='<div class="qor-redactor__image--buttons">\n            <span class="qor-redactor__image--edit" contenteditable="false">Edit</span>\n            <span class="qor-cropper__toggle--redactor" contenteditable="false">Crop</span>\n        </div>',s.MODAL='<div class="qor-modal fade" tabindex="-1" role="dialog" aria-hidden="true">\n            <div class="mdl-card mdl-shadow--2dp" role="document">\n              <div class="mdl-card__title">\n                <h2 class="mdl-card__title-text">$[title]</h2>\n              </div>\n              <div class="mdl-card__supporting-text">\n                <div class="qor-cropper__wrapper"></div>\n              </div>\n              <div class="mdl-card__actions mdl-card--border">\n                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect qor-cropper__save">$[ok]</a>\n                <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect" data-dismiss="modal">$[cancel]</a>\n              </div>\n              <div class="mdl-card__menu">\n                <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect" data-dismiss="modal" aria-label="close">\n                  <i class="material-icons">close</i>\n                  </button>\n              </div>\n            </div>\n        </div>',s.plugin=function(e){return this.each(function(){var i=c(this),n=i.data(o);if(n)/destroy/.test(e)&&window.$R(this,"destroy");else{if(!window.$R)return;if(/destroy/.test(e))return;i.data(o,n={});var t={imageUpload:i.data("uploadUrl"),fileUpload:i.data("uploadUrl"),buttons:["html","format","bold","italic","deleted","lists","image","file","link"],linkNewTab:!0,linkTitle:!1,autoparsePaste:!1,autoparseLinks:!1,multipleUpload:!1,toolbarFixedTarget:!i.closest(".qor-slideout").length&&!i.closest(".qor-bottomsheets").length&&c("main.mdl-layout__content").length?"main.mdl-layout__content":document,callbacks:{started:function(){var t,a=c(this.container.$container.nodes[0]),l=c(this.toolbar.$toolbar.nodes[0]),e=c(".qor-slideout").is(":visible"),d=64;e?d=0!=i.closest(".qor-bottomsheets").length?(t=i.closest(".qor-page__body"),i.closest(".qor-page__body").offset().top):(t=".qor-slideout__body",c(".qor-slideout__header").height()):d+=c(t=".qor-layout main.qor-page").find(".qor-page__header").height(),c(t).on(r,function(){var t,e,i,n,o,r,s;t=l,i=d,n=(e=a).offset().top,o=e.outerHeight(),r={position:"relative",top:"auto",width:"auto"},s={position:"fixed",top:i,width:e.width(),boxShadow:"none"},n<i&&Math.abs(n)<Math.abs(o-i)?(t.css(s),e.css("padding-top",t.outerHeight())):(t.css(r),e.css("padding-top",0))}),i.data("cropUrl")&&i.data(o,n=new s(i,{remote:i.data("cropUrl"),text:i.data("text"),parent:".qor-field",toggle:".qor-cropper__toggle--redactor",replace:function(t){return t.replace(/\.\w+$/,function(t){return".original"+t})},complete:c.proxy(function(){this.code.sync()},this)}))},imageUpload:function(t,e){t=c(t);e.filelink&&t.prop("src",e.filelink)},insertedLink:function(t){var t=c(t),e=this.link.description;t.prop("title",e||t.text()),this.link.description="",this.link.linkUrlText="",this.link.insertedTriggered=!0},fileUpload:function(t,e){c(t).prop("href",e.filelink).html(e.filename)}}};c.extend(t,i.data("redactorSettings")),window.$R.prototype.constructor.services.editor.prototype.focus=function(){return!1},window.$R(this,t)}"string"==typeof e&&c.isFunction(t=n[e])&&t.apply(n)})},c(function(){var e='textarea[data-toggle="qor.redactor"]';c(document).on("disable.qor.redactor",function(t){s.plugin.call(c(e,t.target),"destroy")}).on(t,function(t){s.plugin.call(c(e,t.target))}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(c){var r=window._,s=window.QOR,n="qor.replicator",t="enable."+n,e="submit."+n,a="click."+n,i="slideoutBeforeSend.qor.slideout.replicator",o="selectcoreBeforeSend.qor.selectcore.replicator bottomsheetBeforeSend.qor.bottomsheets.replicator",l=".qor-fieldset-container";function d(t,e){this.$element=c(t),this.options=c.extend({},d.DEFAULTS,c.isPlainObject(e)&&e),this.index=0,this.init()}return d.prototype={constructor:d,init:function(){var i,n=this,t=this.$element,e=t.find("> .qor-field__block > .qor-fieldset--new");this.singlePage=!(t.closest(".qor-slideout").length&&t.closest(".qor-bottomsheets").length),this.maxitems=t.data("maxItem"),this.isSortable=t.hasClass("qor-fieldset-sortable"),e.length&&!t.closest(".qor-fieldset--new").length&&(e.trigger("disable"),e.find("select[data-toggle]").removeAttr("data-select2-id"),this.isMultipleTemplate=t.data("isMultiple"),this.isMultipleTemplate?(this.fieldsetName=[],this.template={},this.index=[],e.each(function(t,e){(i=c(e).data("fieldsetName"))&&(n.template[i]=c(e).prop("outerHTML"),n.fieldsetName.push(i))}),this.parseMultiple()):this.parse(e.prop("outerHTML")),e.hide(),this.bind(),this.resetButton(),this.resetPositionButton())},resetPositionButton:function(){var t=this.$element.find("> .qor-sortable__button");this.isSortable&&(1<this.getCurrentItems()?t.show():t.hide())},getCurrentItems:function(){return this.$element.find("> .qor-field__block > .qor-fieldset").not(".qor-fieldset--new,.is-deleted").length},toggleButton:function(t){var e=this.$element.find("> .qor-field__block > .qor-fieldset__add");t?e.hide():e.show()},resetButton:function(){this.maxitems<=this.getCurrentItems()?this.toggleButton(!0):this.toggleButton()},parse:function(t){t&&(t=this.initTemplate(t),this.template=t.template,this.index=t.index)},parseMultiple:function(){for(var t,e,i=this.fieldsetName,n=0,o=i.length;n<o;n++)e=i[n],t=this.initTemplate(this.template[e]),this.template[e]=t.template,this.index.push(t.index);this.multipleIndex=r.max(this.index)},initTemplate:function(t){var c,u=this.$element.parents(l).length;return{template:t=t.replace(/(\w+)\="(\S*\[\d+\]\S*)"/g,function(t,l,d){return d=d.replace(/^(\S*)\[(\d+)\]([^\[\]]*)$/,function(t,e,i){if(t===d){if("name"!==l||c||(c=i),u){for(var n="",o=t.split(/\[\d+\]/),r=t.match(/\[\d+\]/g),s=0;s<o.length;s++){var a="";s===u?a="[{{index}}]":s<r.length&&(a=r[s]),n+=o[s]+a}return n}return t.replace(/\[\d+\]/,"[{{index}}]")}}),l+'="'+d+'"'}),index:parseFloat(c)+5}},bind:function(){var t=this.options;this.$element.on(a,t.addClass,c.proxy(this.add,this)).on(a,t.delClass,c.proxy(this.del,this)),this.singlePage&&c(document).on(e,".mdl-layout__container form",this.clearFieldData),c(document).on(i,".qor-slideout",this.clearFieldDataInSlideout).on(o,this.clearFieldDataInBottomsheet)},unbind:function(){this.$element.off(a),this.singlePage&&c(document).off(e,".mdl-layout__container form",this.clearFieldData),c(document).off(i,".qor-slideout",this.clearFieldDataInSlideout).off(o,this.clearFieldDataInBottomsheet)},clearFieldData:function(){c(".qor-fieldset--new").remove()},clearFieldDataInSlideout:function(){c(".qor-slideout .qor-fieldset--new").remove()},clearFieldDataInBottomsheet:function(){c(".qor-bottomsheets .qor-fieldset--new").remove()},add:function(t,e,i){var n=this.options,o=c(t.target).closest(n.addClass);if(this.maxitems<=this.getCurrentItems())return!1;if(this.isMultipleTemplate){var r,s,a=o.data("template"),l=o.closest(this.$element).children(n.childrenClass),n=o.closest(n.childrenClass).children("fieldset"),a=this.template[a],d=c(a.replace(/\{\{index\}\}/g,this.multipleIndex));for(r in o.data())r.match(/^sync/)&&(s=r.replace(/^sync/,""),d.find("input[name*='."+s+"']").val(o.data(r)));n.length?n.last().after(d.show()):l.prepend(d.show()),d.data("itemIndex",this.multipleIndex).removeClass("qor-fieldset--new"),this.multipleIndex++}else i?e&&e.length&&(this.addMultiple(e),c(document).trigger("addedMultipleDone.qor.replicator")):(d=this.addSingle(),o.before(d.show()),this.index++);i||(d.trigger("enable"),c(document).trigger("added.qor.replicator",[d]),t.stopPropagation()),this.resetPositionButton(),this.resetButton()},addMultiple:function(t){for(var e,i=0,n=t.length;i<n;i++)e=this.addSingle(),this.index++,c(document).trigger("addedMultiple.qor.replicator",[e,t[i]])},addSingle:function(){var t,e=this.$element;if(this.template)return t=c(this.template.replace(/\{\{index\}\}/g,this.index)),this.isSortable&&(e=e.find("> .qor-field__block > .qor-sortable__item").not(".qor-fieldset--new").length,t.attr("order-index",e).attr("order-item","item_".concat(e)).css("order",e)),t.data("itemIndex",this.index).removeClass("qor-fieldset--new"),t},del:function(t){var e,i=this.options,n=c(t.target).closest(i.itemClass),o=this,t={confirm:c(t.target).closest(i.delClass).data("confirm")||"Are you sure?"};s.qorConfirm(t,function(t){t&&(n.addClass("is-deleted").children(":visible").addClass("hidden").hide(),(e=c(i.alertTemplate.replace("{{name}}",o.parseName(n)))).find(i.undoClass).one(a,function(){if(o.maxitems<=o.getCurrentItems())return window.QOR.qorConfirm(o.$element.data("maxItemHint")),!1;n.find("> .qor-fieldset__alert").remove(),n.removeClass("is-deleted").children(".hidden").removeClass("hidden").show(),o.resetButton(),o.resetPositionButton()}.bind(this)),o.resetButton(),o.resetPositionButton(),n.append(e))})},parseName:function(t){t=t.find("input[name]").attr("name")||t.find("textarea[name]").attr("name");if(t)return t.replace(/[^\[\]]+$/,"")},destroy:function(){this.unbind(),this.$element.removeData(n)}},d.DEFAULTS={itemClass:".qor-fieldset",newClass:".qor-fieldset--new",addClass:".qor-fieldset__add",delClass:".qor-fieldset__delete",childrenClass:".qor-field__block",undoClass:".qor-fieldset__undo",alertTemplate:'<div class="qor-fieldset__alert"><input type="hidden" name="{{name}}._destroy" value="1"><button class="mdl-button mdl-button--accent mdl-js-button mdl-js-ripple-effect qor-fieldset__undo" type="button">Undo delete</button></div>'},d.plugin=function(i){return this.each(function(){var t=c(this),e=t.data(n);e||t.data(n,e=new d(this,i)),"string"==typeof i&&c.isFunction(t=e[i])&&t.call(e)})},c(function(){var e=l,i={};c(document).on("disable.qor.replicator",function(t){d.plugin.call(c(e,t.target),"destroy")}).on(t,function(t){d.plugin.call(c(e,t.target),i)}).triggerHandler(t)}),d}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var a=window.location,o=window.componentHandler,l=window.history,n="qor.globalSearch",t="enable."+n,e="click."+n,d=".qor-global-search--resource",r=".qor-global-search--results",c="is-active";function u(t,e){this.$element=s(t),this.options=s.extend({},u.DEFAULTS,s.isPlainObject(e)&&e),this.init()}return u.prototype={constructor:u,init:function(){this.bind(),this.initTab()},bind:function(){this.$element.on(e,s.proxy(this.click,this))},unbind:function(){this.$element.off(e,this.check)},initTab:function(){var t=a.search;/resource_name/.test(t)&&(t=t.match(/resource_name=\w+/g).toString().split("=")[1],s(d).removeClass(c),s('[data-resource="'+t+'"]').addClass(c))},click:function(t){var e,i,n,o,t=s(t.target),r=t.data();t.is(d)&&(e=a.href.replace(/#/g,""),r=r.resource,i=/resource_name/.test(e),n="resource_name="+r,o=/keyword/.test(e)?"&":"?keyword=&",r=r?i?e.replace(/resource_name=\w+/g,n):e+o+n:e.replace(/&resource_name=\w+/g,""),l.pushState?this.fetchSearch(r,t):a.href=r)},fetchSearch:function(e,i){var n=document.title;s.ajax(e,{method:"GET",dataType:"html",beforeSend:function(){s(".mdl-spinner").remove(),s(r).prepend('<div class="mdl-spinner mdl-js-spinner is-active"></div>').find(".qor-section").hide(),o.upgradeElement(document.querySelector(".mdl-spinner"))},success:function(t){t=s(t).find(r).html();s(d).removeClass(c),i.addClass(c),l.pushState({Page:e,Title:n},n,e),s(".mdl-spinner").remove(),s(r).removeClass("loading").html(t),o.upgradeElements(document.querySelectorAll(".qor-table"))},error:function(t,e,i){s(r).find(".qor-section").show(),s(".mdl-spinner").remove(),window.alert([e,i].join(": "))}})},destroy:function(){this.unbind(),this.$element.removeData(n)}},u.DEFAULTS={},u.plugin=function(i){return this.each(function(){var t=s(this),e=t.data(n);e||t.data(n,e=new u(this,i)),"string"==typeof i&&s.isFunction(t=e[i])&&t.call(e)})},s(function(){var e='[data-toggle="qor.global.search"]',i={};s(document).on("disable.qor.globalSearch",function(t){u.plugin.call(s(e,t.target),"destroy")}).on(t,function(t){u.plugin.call(s(e,t.target),i)}).triggerHandler(t)}),u}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(l){var d=window.FormData,c=window.QOR,n="qor.selectcore",s="afterSelected."+n,t="click."+n,e="submit."+n,i="table.qor-js-table tr";function o(t,e){this.$element=l(t),this.options=l.extend({},o.DEFAULTS,l.isPlainObject(e)&&e),this.init()}return o.prototype={constructor:o,init:function(){this.bind()},bind:function(){this.$element.on(t,i,this.processingData.bind(this)).on(e,"form",this.submit.bind(this))},unbind:function(){this.$element.off(t,i).off(e,"form")},processingData:function(e){var t=l(e.target).closest("tr"),i=t.closest(".qor-bottomsheets"),n={},o=this.options,r=o.onSelect,o=o.loading;return(n=l.extend({},n,t.data())).$clickElement=t,t=n.mediaLibraryUrl||n.url,o&&l.isFunction(o)&&o(i),t?l.getJSON(t,function(t){t.MediaOption&&(t.MediaOption=JSON.parse(t.MediaOption)),n=l.extend({},t,n),r&&l.isFunction(r)&&(r(n,e),l(document).trigger(s))}).always(function(){i.find(".qor-media-loading").remove()}):r&&l.isFunction(r)&&(r(n,e),l(document).trigger(s)),!1},submit:function(e){var i,t=e.target,n=l(t),o=this,r=n.find(":submit"),s=l(c.$formLoading),a=this.options.onSubmit;l(document).trigger("selectcoreBeforeSend.qor.selectcore"),n.find(".qor-fieldset--new").remove(),d&&(e.preventDefault(),l.ajax(n.prop("action"),{method:n.prop("method"),data:new d(t),dataType:"json",processData:!1,contentType:!1,beforeSend:function(){l(".qor-submit-loading").remove(),s.appendTo(r.prop("disabled",!0).closest(".qor-form__actions")).trigger("enable.qor.material")},success:function(t){t.MediaOption&&(t.MediaOption=JSON.parse(t.MediaOption)),(i=t).primaryKey=i.ID,l(".qor-error").remove(),a&&l.isFunction(a)?(a(i,e),l(document).trigger("afterSubmitted.qor.selectcore")):o.refresh()},error:function(t){c.handleAjaxError(t)},complete:function(){r.prop("disabled",!1)}}))},refresh:function(){setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind()}},l.fn.qorSelectCore=o.plugin=function(i){return this.each(function(){var t=l(this),e=t.data(n);if(!e){if(/destroy/.test(i))return;t.data(n,e=new o(this,i))}"string"==typeof i&&l.isFunction(t=e[i])&&t.apply(e)})},o}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(s){var i=s("body"),t=s(document),a=window.Mustache,n="qor.selectone",o="click."+n,r="enable."+n,e="reload.qor.bottomsheets",l=".qor-selected-many__remove",d=".qor-selected-many__undo",c="qor-selected-many__deleted",u=".qor-field__selectmany",h="is_selected",f="qor-bottomsheets__select-many";function p(t,e){this.$element=s(t),this.options=s.extend({},p.DEFAULTS,s.isPlainObject(e)&&e),this.init()}return p.prototype={constructor:p,init:function(){this.bind()},bind:function(){t.on(e,".".concat(f),this.reloadData.bind(this)),this.$element.on(o,l,this.clearSelect.bind(this)).on(o,'[data-select-modal="many"]',this.openBottomSheets.bind(this)).on(o,d,this.undoDelete.bind(this))},unbind:function(){t.off(o,'[data-select-modal="many"]').off(e,".".concat(f)),this.$element.off(o,l).off(o,d)},clearSelect:function(t){var t=s(t.target),e=t.closest(u);return t.closest("[data-primary-key]").addClass(c),this.updateSelectInputData(e),!1},undoDelete:function(t){var t=s(t.target),e=t.closest(u);return t.closest("[data-primary-key]").removeClass(c),this.updateSelectInputData(e),!1},openBottomSheets:function(t){var t=s(t.target),e=t.data();this.BottomSheets=i.data("qor.bottomsheets"),this.bottomsheetsData=e,this.$selector=e.selectId?s(e.selectId):t.closest(u).find("select"),this.$selectFeild=this.$selector.closest(u).find(".qor-field__selected-many"),this.SELECT_MANY_SELECTED_ICON=s('[name="select-many-selected-icon"]').html(),this.SELECT_MANY_UNSELECTED_ICON=s('[name="select-many-unselected-icon"]').html(),this.SELECT_MANY_HINT=s('[name="select-many-hint"]').html(),this.SELECT_MANY_TEMPLATE=s('[name="select-many-template"]').html(),e.url=e.selectListingUrl,e.selectDefaultCreating&&(e.url=e.selectCreatingUrl),this.BottomSheets.open(e,this.handleSelectMany.bind(this))},reloadData:function(){this.initItems()},renderSelectMany:function(t){return a.render(this.SELECT_MANY_TEMPLATE,t)},renderHint:function(t){return a.render(this.SELECT_MANY_HINT,t)},initItems:function(){var i,t=this.$bottomsheets.find("tbody tr"),n=this.SELECT_MANY_SELECTED_ICON,o=this.SELECT_MANY_UNSELECTED_ICON,r=[];this.$selectFeild.find("[data-primary-key]").not("."+c).each(function(){r.push(s(this).data().primaryKey)}),t.each(function(){var t=s(this),e=t.find("td:first");i=t.data().primaryKey,"-1"!=r.indexOf(i)?(t.addClass(h),e.append(n)):e.append(o)}),this.updateHint(this.getSelectedItemData())},getSelectedItemData:function(){return{selectedNum:this.$selectFeild.find("[data-primary-key]").not("."+c).length}},updateHint:function(t){s.extend(t,this.bottomsheetsData),t=this.renderHint(t),this.$bottomsheets.find(".qor-selectmany__hint").remove(),this.$bottomsheets.find(".qor-page__body").before(t)},updateSelectInputData:function(t){var e,i,n=(t||this.$selectFeild).find("[data-primary-key]").not("."+c),o=t?t.find(".qor-field__selectmany-input"):this.$selector,r=o.find("option");r.prop("selected",!1),n.each(function(){i=s(this).data().primaryKey,(e=r.filter('[value="'+i+'"]')).length||(i={primaryKey:i,displayName:""},e=s(a.render(p.SELECT_MANY_OPTION_TEMPLATE,i)),o.append(e)),e.prop("selected",!0)})},changeIcon:function(t,e){t.find(".qor-select__select-icon").remove(),t.find("td:first").prepend(e)},removeItem:function(t){var e=t.primaryKey;this.$selectFeild.find('[data-primary-key="'+e+'"]').find(l).click(),this.changeIcon(t.$clickElement,this.SELECT_MANY_UNSELECTED_ICON)},addItem:function(t,e){var i=this.renderSelectMany(t),n=this.$selectFeild.find('[data-primary-key="'+t.primaryKey+'"]');return n.length?n.hasClass(c)?(n.removeClass(c),this.updateSelectInputData(),void this.changeIcon(t.$clickElement,this.SELECT_MANY_SELECTED_ICON)):void 0:(this.$selectFeild.append(i),e?((n=s(a.render(p.SELECT_MANY_OPTION_TEMPLATE,t))).appendTo(this.$selector),n.prop("selected",!0),this.$bottomsheets.remove(),void(s(".qor-bottomsheets").is(":visible")||s("body").removeClass("qor-bottomsheets-open"))):void this.changeIcon(t.$clickElement,this.SELECT_MANY_SELECTED_ICON))},handleSelectMany:function(t){var e={onSelect:this.onSelectResults.bind(this),onSubmit:this.onSubmitResults.bind(this)};t.qorSelectCore(e).addClass(f),t.on(o,".qor-selectmany__selectall",this.handleSelectAll.bind(this)),this.$bottomsheets=t,this.initItems()},handleSelectAll:function(){var t=this.$bottomsheets.find(".qor-table tbody tr"),e=t.not(".is_selected");(e.length?e:t).click()},onSelectResults:function(t){this.handleResults(t)},onSubmitResults:function(t){this.handleResults(t,!0)},handleResults:function(t,e){t.displayName=t.Text||t.Name||t.Title||t.Code||t[Object.keys(t)[0]],t.displayName=t.displayName.escapeSymbol(),e?this.addItem(t,!0):((e=t.$clickElement).toggleClass(h),e.hasClass(h)?this.addItem(t):this.removeItem(t),this.updateHint(this.getSelectedItemData()),this.updateSelectInputData())},destroy:function(){this.unbind(),this.$element.removeData(n)}},p.SELECT_MANY_OPTION_TEMPLATE='<option value="[[ primaryKey ]]" >[[ displayName ]]</option>',p.plugin=function(i){return this.each(function(){var t=s(this),e=t.data(n);if(!e){if(/destroy/.test(i))return;t.data(n,e=new p(this,i))}"string"==typeof i&&s.isFunction(t=e[i])&&t.apply(e)})},s(function(){var e='[data-toggle="qor.selectmany"]';s(document).on("disable.qor.selectone",function(t){p.plugin.call(s(e,t.target),"destroy")}).on(r,function(t){p.plugin.call(s(e,t.target))}).triggerHandler(r)}),p}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(r){var i=r("body"),t=r(document),s=window.Mustache,n="qor.selectone",e="click."+n,o="enable."+n,a="reload.qor.bottomsheets",l=".qor-selected__remove",d=".qor-selected__change",c=".qor-field__selected",u=".qor-field__selectone-input",h=".qor-field__selectone-trigger",f=".qor-field__selectone",p="qor-bottomsheets__select-one";function m(t,e){this.$element=r(t),this.options=r.extend({},m.DEFAULTS,r.isPlainObject(e)&&e),this.init()}return m.prototype={constructor:m,init:function(){this.bind()},bind:function(){t.on(a,".".concat(p),this.reloadData.bind(this)),this.$element.on(e,l,this.clearSelect.bind(this)).on(e,"[data-selectone-url]",this.openBottomSheets.bind(this)).on(e,d,this.changeSelect)},unbind:function(){t.off(e,"[data-selectone-url]").off(a,".".concat(p)),this.$element.off(e,l).off(e,d)},clearSelect:function(t){t=r(t.target).closest(f);return t.find(c).remove(),t.find(u).html(""),t.find(u)[0].value="",t.find(h).show(),t.trigger("qor.selectone.unselected"),!1},changeSelect:function(){r(this).closest(f).find(h).trigger("click")},openBottomSheets:function(t){var t=r(t.target),e=t.data();this.BottomSheets=i.data("qor.bottomsheets"),this.$parent=t.closest(f),e.url=e.selectoneUrl,this.SELECT_ONE_SELECTED_ICON=r('[name="select-one-selected-icon"]').html(),this.BottomSheets.open(e,this.handleSelectOne.bind(this))},initItem:function(){var t=this.$parent.find(c);t.length&&(t=t.data().primaryKey)&&this.$bottomsheets.find('tr[data-primary-key="'+t+'"]').addClass("is_selected").find("td:first").append(this.SELECT_ONE_SELECTED_ICON)},reloadData:function(){this.initItem()},renderSelectOne:function(t){return s.render(r('[name="select-one-selected-template"]').html(),t)},handleSelectOne:function(t){var e={onSelect:this.onSelectResults.bind(this),onSubmit:this.onSubmitResults.bind(this)};t.qorSelectCore(e).addClass(p),this.$bottomsheets=t,this.initItem()},onSelectResults:function(t){this.handleResults(t)},onSubmitResults:function(t){this.handleResults(t,!0)},handleResults:function(t){var e,i=this.$parent,n=i.find("select"),o=i.find(c);t.displayName=t.Text||t.Name||t.Title||t.Code||t[Object.keys(t)[0]],t.selectoneValue=t.primaryKey||t.ID,t.displayName=t.displayName.escapeSymbol(),n.length&&(e=this.renderSelectOne(t),o.length&&o.remove(),i.prepend(e),i.find(h).hide(),n.html(s.render(m.SELECT_ONE_OPTION_TEMPLATE,t)),n[0].value=t.primaryKey||t.ID,i.trigger("qor.selectone.selected",[t]),this.$bottomsheets.qorSelectCore("destroy").remove(),r(".qor-bottomsheets").is(":visible")||r("body").removeClass("qor-bottomsheets-open"))},destroy:function(){this.unbind(),this.$element.removeData(n)}},m.SELECT_ONE_OPTION_TEMPLATE='<option value="[[ selectoneValue ]]" selected>[[ displayName ]]</option>',m.plugin=function(i){return this.each(function(){var t=r(this),e=t.data(n);if(!e){if(/destroy/.test(i))return;t.data(n,e=new m(this,i))}"string"==typeof i&&r.isFunction(t=e[i])&&t.apply(e)})},r(function(){var e='[data-toggle="qor.selectone"]';r(document).on("disable.qor.selectone",function(t){m.plugin.call(r(e,t.target),"destroy")}).on(o,function(t){m.plugin.call(r(e,t.target))}).triggerHandler(o)}),m}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(l){var t=l(document),o="qor.selector",i="enable."+o,e="click."+o,d="selected",c="disabled",r="clearable",s="."+d,u=".qor-selector-toggle",a=".qor-selector-label",h=".qor-selector-menu",f=".qor-bottomsheets";function p(t,e){this.options=e,this.$element=l(t),this.init()}return p.prototype={constructor:p,init:function(){var t=this.$element;this.placeholder=t.attr("placeholder")||t.attr("name")||"Select",this.build()},build:function(){var t=this.$element,e=l(p.TEMPLATE),i=this.options.aligned+"-aligned",s={},n=t.data(),o=n.hover,a=t.attr("name");this.isBottom="bottom"==n.position,o&&e.addClass("hover"),e.addClass(i).find(h).html(function(){var r=[];return t.children().each(function(){var t=l(this),e=t.attr("selected"),i=t.attr("disabled"),n=t.attr("value"),t=t.text(),o=[];e&&(o.push(d),s.value=n,s.label=t,s.paramName=a),i&&o.push(c),r.push("<li"+(o.length?' class="'+o.join(" ")+'"':"")+' data-value="'+n+'" data-label="'+t+'" data-param-name="'+a+'">'+t+"</li>")}),r.join("")}),this.$selector=e,t.hide().after(e),e.find(u).data("paramName",a),this.pick(s,!0),this.bind()},unbuild:function(){this.unbind(),this.$selector.remove(),this.$element.show()},bind:function(){this.$selector.on(e,l.proxy(this.click,this)),t.on(e,l.proxy(this.close,this))},unbind:function(){this.$selector.off(e,this.click)},click:function(t){var e=l(t.target);t.stopPropagation(),e.is(".qor-selector-clear")?this.clear():e.is("li")?(e.hasClass(d)||e.hasClass(c)||this.pick(e.data()),this.close()):e.closest(u).length&&this.open()},pick:function(t,e){var i=this.$selector,n=!!t.value,o=this.$element;i.find(u).toggleClass("active",n).toggleClass(r,n&&this.options.clearable).find(a).text(t.label||this.placeholder),e||(i.find(h).children('[data-value="'+t.value+'"]').addClass(d).siblings(s).removeClass(d),o.val(t.value),o.closest(f).length&&!o.closest('[data-toggle="qor.filter"]').length?l(f).trigger("selectorChanged.qor.selector",[t.value,t.paramName]):o.trigger("change"))},clear:function(){var t=this.$element;this.$selector.find(u).removeClass("active").removeClass(r).find(a).text(this.placeholder).end().end().find(h).children(s).removeClass(d),t.val("").trigger("change")},open:function(){t.triggerHandler(e),l(".qor-filter__dropdown").hide(),this.$selector.addClass("open"),this.isBottom&&this.$selector.addClass("bottom")},close:function(){this.$selector.removeClass("open"),this.isBottom&&this.$selector.removeClass("bottom")},destroy:function(){this.unbuild(),this.$element.removeData(o)}},p.DEFAULTS={aligned:"left",clearable:!1},p.TEMPLATE='<div class="qor-selector"><a class="qor-selector-toggle"><span class="qor-selector-label"></span><i class="material-icons qor-selector-arrow">arrow_drop_down</i><i class="material-icons qor-selector-clear">clear</i></a><ul class="qor-selector-menu"></ul></div>',p.plugin=function(n){return this.each(function(){var t,e=l(this),i=e.data(o);if(!i){if(/destroy/.test(n))return;t=l.extend({},p.DEFAULTS,e.data(),"object"===_typeof(n)&&n),e.data(o,i=new p(this,t))}"string"==typeof n&&l.isFunction(e=i[n])&&e.apply(i)})},l(function(){var e='[data-toggle="qor.selector"]';l(document).on("disable.qor.selector",function(t){p.plugin.call(l(e,t.target),"destroy")}).on(i,function(t){p.plugin.call(l(e,t.target))}).triggerHandler(i)}),p}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(f){var t=f(document),l=window.FormData,p=window.QOR_Translations,o=window._,d=window.QOR,n="qor.slideout",e="keyup."+n,i="click."+n,r="submit."+n,m="shown."+n,y="hidden."+n,s="transitionend",a="qor-slideout-open",c="qor-slideout-mini",u="is-shown",h="is-slided",g=".qor-body__loading";function b(t,e){var i=[],n=e?"src":"href";return t.each(function(){i.push(f(this).attr(n))}),o.uniq(i)}function v(t,e,i){for(var n=0,o=0,r=t.length;o<r;o++){var s=document.createElement("script");s.onload=function(){++n===t.length&&f.isFunction(i)&&i(),e&&e.url&&e.response&&function(t,e){var i,n=f.fn.qorSliderAfterShow;for(i in n)n.hasOwnProperty(i)&&!n[i].isLoaded&&(n[i].isLoaded=!0,n[i].call(this,t,e))}(e.url,e.response)},s.src=t[o],document.body.appendChild(s)}}function _(t){var e=document.createElement("link"),i=t.shift();e.type="text/css",e.rel="stylesheet",e.onload=function(){t.length&&_(t)},e.href=i,document.getElementsByTagName("head")[0].appendChild(e)}function q(t){var e=f("script"),t=b(t,!0),e=b(e,!0);return o.difference(t,e)}function w(t){var e=f("link"),t=b(t),e=b(e);return o.difference(t,e)}function S(t,e){this.$element=f(t),this.options=f.extend({},S.DEFAULTS,f.isPlainObject(e)&&e),this.slided=!1,this.disabled=!1,this.slideoutType=!1,this.init()}return S.prototype={constructor:S,init:function(){this.build(),this.bind()},build:function(){var t;this.$slideout=t=f(S.TEMPLATE).appendTo("body"),this.$slideoutTemplate=t.html()},unbuild:function(){this.$slideout.remove()},bind:function(){this.$slideout.on(r,"form",this.submit.bind(this)).on(i,".qor-slideout__fullscreen",this.toggleSlideoutMode.bind(this)).on(i,'[data-dismiss="slideout"]',this.hide.bind(this)),t.on(e,f.proxy(this.keyup,this))},unbind:function(){this.$slideout.off(r,this.submit).off(i),t.off(e,this.keyup)},keyup:function(t){27!==t.which||f(".qor-bottomsheets").is(":visible")||f(".qor-modal").is(":visible")||f("#redactor-modal-box").length||f("#dialog").is(":visible")||(this.hide(),this.removeSelectedClass())},loadExtraResource:function(t){var e=w(t.$links),i=q(t.$scripts);e.length&&_(e),i.length&&v(i,t)},removeSelectedClass:function(){this.$element.find("[data-url]").removeClass("is-selected")},addLoading:function(){f(g).remove(),f(S.TEMPLATE_LOADING).appendTo(f("body")).trigger("enable.qor.material")},toggleSlideoutMode:function(){this.$slideout.toggleClass("qor-slideout__fullscreen").find(".qor-slideout__fullscreen i").toggle()},checkRichedutorHTMLTags:function(t){for(var e=new Array,i=new Array,n=t.value.split("\n"),o=0;o<n.length;o++)if(i=n[o].match(/<(\/{1})?\w+((\s+\w+(\s*=\s*(?:".*?"|'.*?'|[^'">\s]+))?)+\s*|\s*)>/g))for(var r=0;r<i.length;r++)if(0<=i[r].indexOf("</"))for(var s=(s=i[r].substr(2,i[r].length-3)).replace(/ /g,""),a=e.length-1;0<=a&&(e[a].element!=s||(e.splice(a,1),"html"==s));a--);else{for(var l=new Object,d=(l.full=i[r],l.line=o+1,0<l.full.indexOf(" ")?l.element=l.full.substr(1,l.full.indexOf(" ")-1):l.element=l.full.substr(1,l.full.length-2),new Array("area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr")),c=!1,u=0;u<d.length;u++)0==d[u].localeCompare(l.element)&&(c=!0);0==c&&e.push(l)}return e.length},submit:function(t){var i=this.$slideout,e=t.target,n=f(e),o=this,r=f(d.$formLoading),s=n.find(":submit"),a=!1;if(!n.data("normal-submit")&&(i.trigger("slideoutBeforeSend.qor.slideout"),l)){if(t.preventDefault(),document.querySelectorAll(".qor-redactor-box .redactor-source").forEach(function(t){o.checkRichedutorHTMLTags(t)&&(a=!0)}),a)return d.qorConfirm(p.slideoutCheckHTMLTagsError),!1;this.submitXHR=f.ajax(n.prop("action"),{method:n.prop("method"),data:new l(e),dataType:"html",processData:!1,contentType:!1,beforeSend:function(){f(".qor-submit-loading").remove(),r.appendTo(s.prop("disabled",!0).closest(".qor-form__actions")).trigger("enable.qor.material"),f.fn.qorSlideoutBeforeHide=null},success:function(){var t=n.data("returnUrl"),e=n.data("refreshUrl");i.trigger("slideoutSubmitComplete.qor.slideout"),e?window.location.href=e:"refresh"!=t&&t&&"refresh"!=t?o.load(t):o.refresh()},error:function(t){d.handleAjaxError(t)},complete:function(){s.prop("disabled",!1)}})}},load:function(a,l){var d,t,e,c,u=this.options,h=this.$slideout;a&&(l=f.isPlainObject(l)?l:{},d=l.method||"GET",t=l.datatype||"html",e=f.proxy(function(){f.ajax(a,{method:d,dataType:t,cache:!0,ifModified:!0,success:f.proxy(function(t){var e,i,n;if(f(g).remove(),"GET"===d){if(o=(e=(n=f(t)).find(".mdl-layout__content.qor-page")).find(".qor-form-container"),this.slideoutType=o.length&&o.data().slideoutType,e.length){var o=t.match(/<\s*body.*>[\s\S]*<\s*\/body\s*>/gi),r=(o&&(o=o.join("").replace(/<\s*body/gi,"<div").replace(/<\s*\/body/gi,"</div"),o=f(o).prop("class"),f("body").addClass(o),o={$scripts:n.filter("script"),$links:n.filter("link"),url:a,response:t},this.loadExtraResource(o)),e.find(".qor-button--cancel").attr("data-dismiss","slideout").removeAttr("href"),o=q(e.find("script[src]")),i=w(e.find("link[href]")),o.length&&v(o,{url:a,response:t},function(){}),i.length&&_(i),e.find("script[src],link[href]").remove(),h.html(this.$slideoutTemplate),c=h.find(".qor-slideout__title"),this.$body=h.find(".qor-slideout__body"),c.html(n.find(u.title).html()),o=h.find(".qor-slideout__body")[0],i=e.html(),(n=(o="string"==typeof o?document.getElementById(o):o).cloneNode(!1)).innerHTML=i,o.parentNode.replaceChild(n,o),this.$body.find(".qor-actions__locale").remove(),h.one(m,function(){f(this).trigger("enable")}).one(y,function(){f(this).trigger("disable")}),h.find(".qor-slideout__opennew").attr("href",a),this.show(),f.fn.qorSliderAfterShow);if(r)for(var s in r)r.hasOwnProperty(s)&&f.isFunction(r[s])&&(r[s].isLoaded=!0,r[s].call(this,a,t));h.trigger("slideoutLoaded.qor.slideout",[a,t])}}else l.returnUrl?this.load(l.returnUrl):this.refresh()},this),error:f.proxy(function(){var t;f(g).remove(),t=0<f(".qor-error span").length?f(".qor-error span").map(function(){return f(this).text()}).get().join(", "):p.serverError,window.alert(t)},this)})},this),this.slided?(this.hide(!0),this.$slideout.one(y,e)):e())},open:function(t){this.addLoading(),this.load(t.url,t.data)},reload:function(t){this.hide(),this.load(t)},show:function(){var t,e=this.$slideout;this.slided||(t=f.Event("show.qor.slideout"),e.trigger(t),t.isDefaultPrevented()||(e.removeClass(c),"mini"==this.slideoutType&&e.addClass(c),e.addClass(u).get(0).offsetWidth,e.one(s,f.proxy(this.shown,this)).addClass(h).scrollTop(0)))},shown:function(){this.slided=!0,f("body").addClass(a),this.$slideout.trigger("beforeEnable.qor.slideout").trigger(m).trigger("afterEnable.qor.slideout")},hide:function(){var t={confirm:p.slideoutCloseWarning};f.fn.qorSlideoutBeforeHide?d.qorConfirm(t,function(t){t&&this.hideSlideout()}.bind(this)):this.hideSlideout(),this.removeSelectedClass()},hideSlideout:function(){var t=this.$slideout,e=f(".qor-datepicker").not(".hidden");window.onbeforeunload=null,f.fn.qorSlideoutBeforeHide=null,this.submitXHR&&this.submitXHR.abort(),e.length&&e.addClass("hidden"),this.slided&&(e=f.Event("hide.qor.slideout"),t.trigger(e),e.isDefaultPrevented()||(t.one(s,f.proxy(this.hidden,this)).removeClass("".concat(h," qor-slideout__fullscreen")),t.trigger("slideoutClosed.qor.slideout")))},hidden:function(){this.slided=!1,f("body").removeClass(a),this.$slideout.removeClass(u).trigger(y)},refresh:function(){this.hide(),setTimeout(function(){window.location.reload()},350)},destroy:function(){this.unbind(),this.unbuild(),this.$element.removeData(n)}},S.DEFAULTS={title:".qor-form-title, .mdl-layout-title",content:!1},S.TEMPLATE='<div class="qor-slideout">\n            <div class="qor-slideout__header">\n                <div class="qor-slideout__header-link">\n                    <a href="#" target="_blank" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__opennew"><i class="material-icons">open_in_new</i></a>\n                    <a href="#" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__fullscreen">\n                        <i class="material-icons">fullscreen</i>\n                        <i class="material-icons" style="display: none;">fullscreen_exit</i>\n                    </a>\n                </div>\n                <button type="button" class="mdl-button mdl-button--icon mdl-js-button mdl-js-repple-effect qor-slideout__close" data-dismiss="slideout">\n                    <span class="material-icons">close</span>\n                </button>\n                <h3 class="qor-slideout__title"></h3>\n            </div>\n            <div class="qor-slideout__body"></div>\n        </div>',S.TEMPLATE_LOADING='<div class="qor-body__loading">\n            <div><div class="mdl-spinner mdl-js-spinner is-active qor-layout__bottomsheet-spinner"></div></div>\n        </div>',f.fn.qorSlideout=S.plugin=function(i){return this.each(function(){var t=f(this),e=t.data(n);if(!e){if(/destroy/.test(i))return;t.data(n,e=new S(this,i))}"string"==typeof i&&f.isFunction(t=e[i])&&t.apply(e)})},S}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(n){var o=window.location,r="qor.sorter",t="enable."+r,e="click."+r,i="is-sortable";function s(t,e){this.$element=n(t),this.options=n.extend({},s.DEFAULTS,n.isPlainObject(e)&&e),this.init()}return s.prototype={constructor:s,init:function(){this.$element.addClass(i),this.bind()},bind:function(){this.$element.on(e,"> thead > tr > th",n.proxy(this.sort,this))},unbind:function(){this.$element.off(e,this.sort)},sort:function(t){var t=n(t.currentTarget).data("orderBy"),e=o.search,i="order_by="+t;t&&(/order_by/.test(e)?e=e.replace(/order_by(=\w+)?/,function(){return i}):e+=-1<e.indexOf("?")?"&"+i:i,o.search=e)},destroy:function(){this.unbind(),this.$element.removeClass(i).removeData(r)}},s.DEFAULTS={},s.plugin=function(i){return this.each(function(){var t=n(this),e=t.data(r);if(!e){if(/destroy/.test(i))return;t.data(r,e=new s(this,i))}"string"==typeof i&&n.isFunction(t=e[i])&&t.apply(e)})},n(function(){var e=".qor-js-table";n(document).on("disable.qor.sorter",function(t){s.plugin.call(n(e,t.target),"destroy")}).on(t,function(t){s.plugin.call(n(e,t.target))}).triggerHandler(t)}),s}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var e=window._,r=o("body"),n="qor.tabbar",t="enable."+n,i="click."+n,s=".qor-layout__tab-button",a=".qor-layout__tab-content",l=".mdl-layout__tab-bar-container",d=".qor-layout__tab-right",c=".qor-layout__tab-left",u="is-active";function h(t,e){this.$element=o(t),this.options=o.extend({},h.DEFAULTS,o.isPlainObject(e)&&e),this.init()}return h.prototype={constructor:h,init:function(){this.initTab(),this.bind()},bind:function(){this.$element.on(i,s,this.switchTab.bind(this)),this.$element.on(i,d,this.scrollTabRight.bind(this)),this.$element.on(i,c,this.scrollTabLeft.bind(this))},unbind:function(){this.$element.off(i,s,this.switchTab),this.$element.off(i,d,this.scrollTabRight),this.$element.off(i,c,this.scrollTabLeft)},initTab:function(){var t=this.$element.data();t.scopeActive?r.data("tabScopeActive",t.scopeActive):(o(s).first().addClass(u),r.data("tabScopeActive",o(s).first().data("name"))),this.tabWidth=0,this.slideoutWidth=o(a).outerWidth(),e.each(o(s),function(t){this.tabWidth=this.tabWidth+o(t).outerWidth()}.bind(this)),this.tabWidth>this.slideoutWidth&&this.$element.find(l).append(h.ARROW_RIGHT)},scrollTabLeft:function(t){t.stopPropagation();var e=o(l),t=e.scrollLeft(),i=t-this.slideoutWidth;0<t&&e.animate({scrollLeft:i},400,function(){o(d).show(),0==e.scrollLeft()&&o(c).hide()})},scrollTabRight:function(t){t.stopPropagation();var e=o(l),t=e.scrollLeft(),i=this.tabWidth,n=this.slideoutWidth,t=t+n;t<i&&(e.animate({scrollLeft:t},400,function(){o(c).show(),e.scrollLeft()+n>=i&&o(d).hide()}),o(c).length||this.$element.find(l).prepend(h.ARROW_LEFT))},switchTab:function(t){var e=o(t.target),t=this.$element,i=e.data(),n=r.data().tabScopeActive;if(o(".qor-slideout").is(":visible"))return e.hasClass(u)||(t.find(s).removeClass(u),e.addClass(u),o.ajax(i.tabUrl,{method:"GET",dataType:"html",processData:!1,contentType:!1,beforeSend:function(){o(".qor-layout__tab-spinner").remove();o(a).hide().before('<div class="mdl-spinner mdl-js-spinner is-active qor-layout__tab-spinner"></div>'),window.componentHandler.upgradeElement(o(".qor-layout__tab-spinner")[0])},success:function(t){o(".qor-layout__tab-spinner").remove(),r.data("tabScopeActive",e.data("name"));t=o(t).find(a).html();o(a).show().html(t).trigger("enable")},error:function(){o(".qor-layout__tab-spinner").remove(),r.data("tabScopeActive",n)}})),!1},destroy:function(){this.unbind(),r.removeData("tabScopeActive")}},h.ARROW_RIGHT='<a href="javascript://" class="qor-layout__tab-right"></a>',h.ARROW_LEFT='<a href="javascript://" class="qor-layout__tab-left"></a>',h.DEFAULTS={},h.plugin=function(i){return this.each(function(){var t=o(this),e=t.data(n);if(!e){if(/destroy/.test(i))return;t.data(n,e=new h(this,i))}"string"==typeof i&&o.isFunction(t=e[i])&&t.apply(e)})},o(function(){var e='[data-toggle="qor.tab"]';o(document).on("disable.qor.tabbar",function(t){h.plugin.call(o(e,t.target),"destroy")}).on(t,function(t){h.plugin.call(o(e,t.target))}).triggerHandler(t)}),h}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?t(require("jquery")):t(jQuery)}(function(o){var r="qor.timepicker",t="enable."+r,e="click."+r,i="focus."+r,n="keydown."+r,s="blur."+r,a="selectTime."+r;function l(t,e){this.$element=o(t),this.options=o.extend(!0,{},l.DEFAULTS,o.isPlainObject(e)&&e),this.formatDate=null,this.pickerData=this.$element.data(),this.parent=this.$element.closest("[data-picker-type]"),this.isTimePicker="time"==this.parent.data("picker-type"),this.isDateTimePicker="datetime"==this.parent.data("picker-type"),this.$targetInput=this.parent.find(this.pickerData.targetInput||(this.isDateTimePicker||this.isTimePicker?".qor-datetimepicker__input":".qor-datepicker__input")),this.init()}return l.prototype={init:function(){var t,e,i;this.$targetInput.is(":disabled")?this.$element.remove():(this.bind(),this.oldValue=this.$targetInput.val(),e=(e=(t=new Date).getMonth()+1)<8?"0"+e:e,i=(i=t.getDate())<10?"0"+i:i,this.dateValueNow=t.getFullYear()+"-"+e+"-"+i)},bind:function(){(this.isDateTimePicker||this.isTimePicker)&&this.$targetInput.qorTimepicker({timeFormat:"H:i",showOn:null,wrapHours:!1,scrollDefault:"now"}).on(a,o.proxy(this.changeTime,this)).on(s,o.proxy(this.blur,this)).on(i,o.proxy(this.focus,this)).on(n,o.proxy(this.keydown,this)),this.$element.on(e,o.proxy(this.show,this))},unbind:function(){this.$element.off(e,this.show),(this.isDateTimePicker||this.isTimePicker)&&this.$targetInput.off(a,this.changeTime).off(s,this.blur).off(i,this.focus).off(n,this.keydown)},focus:function(){},blur:function(){var t,e,i,n,o,r=this.$targetInput.val(),s=r.split(" "),a=s.length,l=/\d{1,2}:\d{1,2}/,d=/^\d{4}-\d{1,2}-\d{1,2}/;if(r){if(1==a)d.test(s[0])&&(t=s[0],e="00:00"),l.test(s[0])&&(t=this.dateValueNow,e=s[0]);else for(var c=0;c<a;c++){i=d.test(s[c]),n=l.test(s[c]),i&&(t=s[c],o="-"),n&&(e=s[c],o=":");for(var u=s[c].split(o),h=0;h<u.length;h++)u[h].length<2&&(u[h]="0"+u[h]);i&&(t=u.join(o)),n&&(e=u.join(o))}this.isTimePicker&&this.checkTime(e)?(this.$targetInput.val(e),this.oldValue=this.$targetInput.val()):this.checkDate(t)&&this.checkTime(e)?(this.$targetInput.val(t+" "+e),this.oldValue=this.$targetInput.val()):this.$targetInput.val(this.oldValue)}},keydown:function(t){var e=t.keyCode;-1==[48,49,50,51,52,53,54,55,56,57,8,37,38,39,40,27,32,20,189,16,186,96,97,98,99,100,101,102,103,104,105].indexOf(e)&&t.preventDefault()},checkDate:function(t){return/^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{1,2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$/.test(t)},checkTime:function(t){return/^([01]\d|2[0-3]):?([0-5]\d)$/.test(t)},changeTime:function(){var t=this.$targetInput,e=this.oldValue,i=/\d{1,2}:\d{1,2}/,n=i.test(e),o=t.data().timepickerObj.list.find(".ui-timepicker-selected").html();this.isTimePicker||(n=e?n?e.replace(i,o):e+" "+o:this.dateValueNow+" "+o,t.val(n),t.trigger("change"))},show:function(){(this.isDateTimePicker||this.isTimePicker)&&(this.$targetInput.qorTimepicker("show"),this.oldValue=this.$targetInput.val())},destroy:function(){this.unbind(),this.$targetInput.qorTimepicker("remove"),this.$element.removeData(r)}},l.DEFAULTS={},l.plugin=function(n){return this.each(function(){var t,e=o(this),i=e.data(r);if(!i){if(!o.fn.qorDatepicker)return;if(/destroy/.test(n))return;t=o.extend(!0,{},e.data(),"object"===_typeof(n)&&n),e.data(r,i=new l(this,t))}"string"==typeof n&&o.isFunction(e=i[n])&&e.apply(i)})},o(function(){var e='[data-toggle="qor.timepicker"]';o(document).on("disable.qor.timepicker",function(t){l.plugin.call(o(e,t.target),"destroy")}).on(t,function(t){l.plugin.call(o(e,t.target))}).triggerHandler(t)}),l});